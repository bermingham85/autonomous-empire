{
  "generated_at": "2025-12-18T11:51:46.8376035+00:00",
  "documents": [
    {
      "size_bytes": 4743,
      "path": "C:\\Users\\bermi\\Projects\\ai-governance\\README.md",
      "content": "# AI Governance Framework\r\n\r\n**Version:** 1.0.0  \r\n**Last Updated:** 2025-12-18  \r\n**Status:** Foundation Active\r\n\r\n---\r\n\r\n## Purpose\r\n\r\nThis repository contains the authoritative governance documents for AI system operations. It defines strict role separation, handover protocols, capabilities, and secret handling policies.\r\n\r\n**Key Principle:** GitHub is the source of truth. All governance changes must be committed here.\r\n\r\n---\r\n\r\n## Core Documents\r\n\r\n### GLOBAL_AI_RULES.md\r\nDefines RULE 12-15 (Strict Role Separation):\r\n- RULE 12: Strict role separation between design and execution\r\n- RULE 13: Mandatory handover protocol\r\n- RULE 14: No self-initiated execution\r\n- RULE 15: Automatic task routing\r\n\r\n### HANDOVER_PROTOCOL.md\r\nStandard format for all handovers between Claude (design) and Warp (execution).\r\n\r\n### CAPABILITIES_MANIFEST.md\r\nAuthoritative reference for what each system can and cannot do:\r\n- Claude: Design, review, audit (never executes)\r\n- Warp: Execute, file ops, Git ops (never designs)\r\n- GitHub: Source of truth storage\r\n\r\n### SECRETS_POLICY.md\r\nWhere secrets live and how to handle them (NO VALUES):\r\n- Storage locations\r\n- Naming conventions\r\n- Handling rules\r\n- Rotation procedures\r\n\r\n### SECRET_ROTATION_LOG.md\r\nTracking log for secret rotations (metadata only, no values).\r\n\r\n---\r\n\r\n## Prompt Templates\r\n\r\nLocated in `prompts/` directory:\r\n\r\n- **handover_claude_to_warp.md** — Claude → Warp execution handover\r\n- **task_router.md** — Task classification and routing logic\r\n- **handover_warp_to_claude_review.md** — Warp → Claude review handover\r\n\r\n---\r\n\r\n## How to Use This Repository\r\n\r\n### For Claude (Design AI)\r\n1. Reference these documents when designing solutions\r\n2. Create WARP.md handover documents following HANDOVER_PROTOCOL.md\r\n3. Never execute or modify files directly\r\n4. Hand off all execution to Warp\r\n\r\n### For Warp (Execution AI)\r\n1. Pull latest governance documents before each major task\r\n2. Validate handover instructions against CAPABILITIES_MANIFEST.md\r\n3. Execute step-by-step as specified\r\n4. Report completion back to Claude/user\r\n5. Commit any governance updates to this repository\r\n\r\n### For Users\r\n1. This repository defines how AI systems must operate\r\n2. Modifications require explicit approval\r\n3. All changes must be committed via Warp (not manually edited)\r\n4. Protected zones defined in CAPABILITIES_MANIFEST.md must be respected\r\n\r\n---\r\n\r\n## Integration with Warp Rules\r\n\r\nThis repository provides **Global Rules** for Warp's governance system:\r\n\r\n**Rules Precedence:**\r\n1. Project subdirectory WARP.md (highest)\r\n2. Project root WARP.md\r\n3. Global Rules (this repository)\r\n\r\n**To add this as a Global Rule in Warp:**\r\n1. Open Warp Drive: Personal > Rules > Global\r\n2. Add rule: \"Follow strict role separation from ai-governance repository\"\r\n3. Reference: `C:\\Users\\bermi\\Projects\\ai-governance\\GLOBAL_AI_RULES.md`\r\n\r\n---\r\n\r\n## Repository Structure\r\n\r\n```\r\nai-governance/\r\n├── README.md                              # This file\r\n├── .gitignore                            # Git protections\r\n├── GLOBAL_AI_RULES.md                    # RULE 12-15\r\n├── HANDOVER_PROTOCOL.md                  # Handover format\r\n├── CAPABILITIES_MANIFEST.md              # System capabilities\r\n├── SECRETS_POLICY.md                     # Secret handling\r\n├── SECRET_ROTATION_LOG.md                # Rotation tracking\r\n└── prompts/\r\n    ├── handover_claude_to_warp.md        # Execution handover template\r\n    ├── task_router.md                    # Task routing logic\r\n    └── handover_warp_to_claude_review.md # Review handover template\r\n```\r\n\r\n---\r\n\r\n## Protected Zones\r\n\r\nThe following areas must NEVER be accessed by any AI system:\r\n- Photos (all locations)\r\n- Personal files (documents, writing, notes)\r\n- Fillmore / Filmora project files\r\n\r\n**Scope:** All operations limited to `C:\\Users\\bermi\\Projects\\` unless explicitly authorized.\r\n\r\n---\r\n\r\n## n8n Integration\r\n\r\n**ONLY n8n Instance:** http://192.168.50.246:5678\r\n\r\nAll scripts and workflows MUST use this instance. No other n8n instances are authorized.\r\n\r\n---\r\n\r\n## Version History\r\n\r\n| Version | Date | Changes | Author |\r\n|---------|------|---------|--------|\r\n| 1.0.0 | 2025-12-18 | Initial governance framework | Claude (designed) / Warp (executed) |\r\n\r\n---\r\n\r\n## Next Review\r\n\r\n**Date:** 2025-01-18  \r\n**Focus:** Capability verification, rule compliance audit\r\n\r\n---\r\n\r\n## Contact & Support\r\n\r\nThis is the authoritative governance repository for the AI system ecosystem under `C:\\Users\\bermi\\Projects\\`.\r\n\r\nFor questions or governance changes:\r\n1. Propose changes via Claude (design phase)\r\n2. Execute changes via Warp (with approval)\r\n3. Commit to this repository (source of truth)\r\n\r\n**Co-Authored-By: Warp <agent@warp.dev>**\r\n",
      "relative_path": "README.md",
      "type": "governance",
      "indexed_at": "2025-12-18T11:51:46.8763325+00:00",
      "title": "AI Governance Framework",
      "token_estimate": 1186.0
    },
    {
      "size_bytes": 8893,
      "path": "C:\\Users\\bermi\\Projects\\ai-governance\\GLOBAL_AI_RULES.md",
      "content": "# GLOBAL_AI_RULES.md\r\n\r\n**Version:** 1.0.0  \r\n**Last Updated:** 2025-12-18  \r\n**Status:** Enforced  \r\n**Authority:** Governance Repository Source of Truth\r\n\r\n---\r\n\r\n## Purpose\r\n\r\nThis document defines the non-negotiable operational rules for all AI systems within the governance framework. These rules enforce strict role separation, mandatory handover protocols, and prevent capability drift.\r\n\r\n**Key Principle:** Any AI violating these rules is in violation, not \"being helpful.\"\r\n\r\n---\r\n\r\n## RULE 12 — STRICT ROLE SEPARATION (COMPULSORY)\r\n\r\nAI systems MUST operate within assigned roles.\r\n\r\n### Design / Architecture / Review Role (Claude)\r\n\r\n**Must Do:**\r\n- Generate plans, templates, prompts, documentation\r\n- Review proposals and diffs\r\n- Audit compliance with rules\r\n- Design system architectures\r\n- Create WARP.md handover documents\r\n\r\n**Must NOT Do:**\r\n- Execute commands or scripts\r\n- Modify files directly\r\n- Make Git commits\r\n- Run tests or compile code\r\n- Access file systems directly\r\n- Interact with databases or APIs (except for research)\r\n\r\n### Execution / Orchestration Role (Warp)\r\n\r\n**Must Do:**\r\n- Execute approved plans step-by-step\r\n- Run scripts and commands\r\n- Scan filesystems and repositories\r\n- Apply changes exactly as specified in WARP.md\r\n- Make Git commits (with co-author attribution)\r\n- Compile code and run tests when instructed\r\n\r\n**Must NOT Do:**\r\n- Redesign architectures\r\n- Invent new processes\r\n- Make judgment calls on implementation approaches\r\n- Modify plans without explicit instructions\r\n- Skip steps in handover documents\r\n\r\n### Source of Truth Role (GitHub)\r\n\r\n**Must Do:**\r\n- Store all governance documents\r\n- Store all WARP.md templates\r\n- Store all prompts and rules\r\n- Version control all changes\r\n- Provide audit trail via commit history\r\n\r\n**Must NOT Do:**\r\n- Nothing bypasses GitHub for governance changes\r\n- No informal documentation outside Git\r\n- No \"quick fixes\" without commits\r\n\r\n### Violation Definition\r\n\r\n**An AI crossing role boundaries is in violation**, regardless of intent or perceived helpfulness.\r\n\r\n**Examples of Violations:**\r\n- Claude executing a shell command\r\n- Claude making a Git commit\r\n- Warp redesigning an architecture\r\n- Warp inventing a new process not in the handover\r\n- Any system bypassing GitHub for governance changes\r\n\r\n---\r\n\r\n## RULE 13 — MANDATORY HANDOVER PROTOCOL\r\n\r\nAll non-trivial work MUST follow this sequence:\r\n\r\n### 1. DESIGN PHASE (Claude or equivalent)\r\n\r\n**Activities:**\r\n- Produce a written plan, prompt set, or templates\r\n- Reference existing GitHub projects and rules\r\n- Create WARP.md handover document\r\n- No execution\r\n\r\n**Output:**\r\n- WARP.md document with step-by-step instructions\r\n- Clear objective and success criteria\r\n- Error handling guidance\r\n- Verification steps\r\n\r\n### 2. HANDOVER PHASE\r\n\r\n**Requirements:**\r\n- Output is explicitly marked: **\"HANDOVER TO WARP\"**\r\n- Includes:\r\n  - Clear goal (one sentence)\r\n  - Constraints (rules, protections, no-bypass)\r\n  - Step-by-step execution instructions\r\n  - Stop condition (checkpoint for human review)\r\n\r\n**Format:**\r\n- Must follow HANDOVER_PROTOCOL.md standard format\r\n- Must reference source of truth (GitHub repos, branches, rules)\r\n- Must specify expected outcomes for each step\r\n\r\n### 3. EXECUTION PHASE (Warp)\r\n\r\n**Requirements:**\r\n- Executes the handover instructions exactly as specified\r\n- Does not reinterpret intent\r\n- Stops at defined checkpoints\r\n- Reports progress after major steps\r\n- Reports completion with summary\r\n\r\n**Constraints:**\r\n- Cannot skip steps\r\n- Cannot improvise solutions\r\n- Cannot modify the plan mid-execution\r\n- Must report errors and stop if encountered\r\n\r\n### Violation Examples\r\n\r\n**Skipping or merging phases is forbidden:**\r\n- Claude saying \"just run this quickly\" and executing\r\n- Warp redesigning the approach mid-execution\r\n- Any system doing both design and execution in one step\r\n\r\n---\r\n\r\n## RULE 14 — NO SELF-INITIATED EXECUTION\r\n\r\nAn AI in design or review role MUST NOT:\r\n- Run commands\r\n- Simulate execution\r\n- Suggest \"just run this quickly\"\r\n- Modify files directly\r\n- Make Git commits\r\n- Install packages\r\n- Start services\r\n\r\n### Execution Authority\r\n\r\nExecution may only occur:\r\n- After an explicit handover from design to execution system\r\n- In the correct execution system (Warp)\r\n- With all prerequisite steps completed\r\n- With proper authorization (user approval if required)\r\n\r\n### Emergency Exceptions\r\n\r\n**None.** There are no emergency exceptions to this rule.\r\n\r\nIf immediate action is required:\r\n1. Design system proposes action\r\n2. Explicitly hands over to execution system\r\n3. Execution system performs action\r\n4. Results reported back\r\n\r\nThis may happen quickly, but the handover MUST occur.\r\n\r\n---\r\n\r\n## RULE 15 — AUTOMATIC TASK ROUTING (NO CHOICE)\r\n\r\nWhen a task is received, the AI MUST first classify it:\r\n\r\n### Task Classification\r\n\r\n**Design / Architecture** → Stay in Claude\r\n- System design\r\n- API design\r\n- Architecture decisions\r\n- Creating WARP.md templates\r\n- Documentation authoring\r\n\r\n**Review / Audit** → Stay in Claude\r\n- Code review\r\n- Compliance audit\r\n- Execution report analysis\r\n- Rule validation\r\n\r\n**File Operations / Scripts / Scanning** → Hand over to Warp\r\n- Reading/writing files\r\n- Running commands\r\n- Git operations\r\n- Code compilation\r\n- Test execution\r\n- File system scans\r\n\r\n**Source of Truth Updates** → GitHub Only\r\n- Governance document changes\r\n- WARP.md template updates\r\n- Prompt template modifications\r\n- Rule changes\r\n\r\n### Handover Requirement\r\n\r\n**If a task belongs to another system:**\r\n1. The AI MUST stop\r\n2. Prepare a handover prompt (using HANDOVER_PROTOCOL.md)\r\n3. Explicitly route the task\r\n4. Wait for the other system to complete\r\n\r\n**Choosing to \"just do it here\" is forbidden.**\r\n\r\n### Mixed Tasks\r\n\r\nFor tasks requiring both design and execution:\r\n1. Design phase completes first (Claude)\r\n2. Handover document created\r\n3. Execution phase follows (Warp)\r\n4. Review phase if needed (back to Claude)\r\n\r\n**Sequential handovers are required. No shortcuts.**\r\n\r\n---\r\n\r\n## Enforcement\r\n\r\n### Self-Enforcement\r\n\r\nEach AI system must:\r\n1. Check every task against these rules before proceeding\r\n2. Self-report if about to violate a rule\r\n3. Refuse to proceed with rule violations\r\n4. Suggest proper workflow instead\r\n\r\n### User Enforcement\r\n\r\nUsers may:\r\n1. Call out rule violations\r\n2. Request the AI stop and restart with proper workflow\r\n3. Report persistent violations for system review\r\n\r\n### Audit Trail\r\n\r\nAll governance operations must:\r\n1. Leave Git commit trail\r\n2. Reference which rule was followed\r\n3. Include co-author attribution: `Co-Authored-By: Warp <agent@warp.dev>`\r\n\r\n---\r\n\r\n## Rule Updates\r\n\r\n### How to Update These Rules\r\n\r\n1. User or Claude proposes rule change\r\n2. Claude designs updated rule definition\r\n3. Claude creates WARP.md to update this file\r\n4. Warp executes update and commits to GitHub\r\n5. Rule change takes effect after commit\r\n\r\n### Not Allowed\r\n\r\n- Ad-hoc rule changes during execution\r\n- Temporary rule suspensions\r\n- \"Just this once\" exceptions\r\n- Rule interpretations that expand capabilities\r\n\r\n---\r\n\r\n## Integration with Existing Rules\r\n\r\nThese rules (12-15) integrate with existing Warp Rules system:\r\n\r\n**From User's Warp Global Rules:**\r\n- n8n instance: http://192.168.50.246:5678 (ONLY instance)\r\n- QNAP network storage mapped to local drives\r\n- Protected zones: Photos, personal files, Fillmore/Filmora\r\n\r\n**Precedence:**\r\n1. Project-specific WARP.md (highest)\r\n2. Project root WARP.md\r\n3. Global Rules (this file and user's Warp Global Rules)\r\n\r\n**Conflict Resolution:**\r\n- More specific rules override general rules\r\n- Later rules (in precedence order) override earlier rules\r\n- Security/protection rules always apply (cannot be overridden)\r\n\r\n---\r\n\r\n## Protected Zones (Absolute)\r\n\r\nThe following zones are NEVER accessible to any AI system:\r\n\r\n**Personal Content:**\r\n- `C:\\Users\\bermi\\Pictures\\` (all subdirectories)\r\n- `C:\\Users\\bermi\\Documents\\Personal\\` (if exists)\r\n- Personal photo libraries (anywhere)\r\n- Personal video files (anywhere)\r\n\r\n**Video Editing Projects:**\r\n- Fillmore project files (any location)\r\n- Filmora project files (any location)\r\n- Video rendering directories\r\n\r\n**Authorized Scope:**\r\n- `C:\\Users\\bermi\\Projects\\` (and subdirectories)\r\n- Operations outside this scope require explicit confirmation\r\n\r\n**If Protected Zone Encountered:**\r\n1. STOP immediately\r\n2. Report to user\r\n3. Do not log file paths or contents\r\n4. Wait for user guidance\r\n\r\n---\r\n\r\n## Version History\r\n\r\n| Version | Date | Changes | Author |\r\n|---------|------|---------|--------|\r\n| 1.0.0 | 2025-12-18 | Initial RULE 12-15 implementation | Claude (designed) / Warp (committed) |\r\n\r\n---\r\n\r\n**Next Review Date:** 2025-01-18  \r\n**Document Owner:** ai-governance repository  \r\n**Enforcement:** Immediate and mandatory\r\n\r\n---\r\n\r\n**Co-Authored-By: Warp <agent@warp.dev>**\r\n",
      "relative_path": "GLOBAL_AI_RULES.md",
      "type": "governance",
      "indexed_at": "2025-12-18T11:51:46.9062912+00:00",
      "title": "GLOBAL_AI_RULES.md",
      "token_estimate": 2224.0
    },
    {
      "size_bytes": 15632,
      "path": "C:\\Users\\bermi\\Projects\\ai-governance\\CAPABILITIES_MANIFEST.md",
      "content": "# CAPABILITIES_MANIFEST.md\n\n**Version:** 1.0.0  \n**Last Updated:** 2025-12-18  \n**Status:** Foundation Document  \n**Governance Rule:** Implements RULE 12-15 (Strict Role Separation)\n\n---\n\n## Purpose\n\nThis document defines the authoritative capabilities and boundaries for each system in the AI governance framework. It establishes what each component can and cannot do, ensuring strict role separation and preventing capability creep.\n\n**Key Principle:** No system may operate outside its defined capabilities without explicit governance document updates committed to GitHub.\n\n---\n\n## 1. Claude Capabilities\n\n### What Claude CAN Do\n\n**Design & Architecture:**\n- Design system architectures and workflows\n- Create project structures and file hierarchies\n- Design data models and API interfaces\n- Plan integration strategies between systems\n- Architect governance frameworks and policies\n\n**Review & Audit:**\n- Review code for quality, security, and best practices\n- Audit project structures for compliance\n- Analyze logs and execution reports\n- Validate WARP.md handover documents\n- Assess architectural decisions and tradeoffs\n\n**Documentation & Templates:**\n- Write WARP.md handover documents\n- Create prompt templates for other AI systems\n- Author governance documentation\n- Design README files and technical guides\n- Generate API documentation templates\n\n**Analysis & Planning:**\n- Break down complex tasks into execution steps\n- Identify dependencies and sequencing requirements\n- Propose solutions to technical problems\n- Evaluate multiple implementation approaches\n- Create test plans and validation criteria\n\n**Knowledge Work:**\n- Answer technical questions\n- Explain concepts and patterns\n- Provide coding guidance and examples\n- Research best practices and patterns\n- Synthesize information from multiple sources\n\n### What Claude CANNOT Do\n\n**Execution Operations:**\n- ❌ Execute shell commands or scripts\n- ❌ Read or write files directly to disk\n- ❌ Make Git commits or pushes\n- ❌ Run tests or compile code\n- ❌ Deploy applications or services\n- ❌ Start or stop processes\n- ❌ Modify system configurations\n- ❌ Access or modify secrets/credentials\n\n**Direct System Interaction:**\n- ❌ Access file systems directly\n- ❌ Make network requests (except via web_search tool)\n- ❌ Interact with databases\n- ❌ Call APIs (except for analysis/design purposes)\n- ❌ Install packages or dependencies\n\n**Repository Operations:**\n- ❌ Clone repositories\n- ❌ Create branches\n- ❌ Merge code\n- ❌ Tag releases\n- ❌ Manage GitHub issues or PRs\n\n### Claude Invocation Methods\n\n**Status:** AVAILABLE\n\n**Method 1: MCP Server (agent-agency-mcp)**\n- **Path:** `C:\\Users\\bermi\\Projects\\agent-agency-mcp`\n- **Protocol:** Model Context Protocol\n- **Function:** Claude Desktop → n8n workflows\n- **Verified:** Yes (active in Claude Desktop config)\n- **Use Case:** Agent delegation, workflow automation\n- **Limitations:** Requires n8n instance at http://192.168.50.246:5678\n\n**Method 2: Handover Templates (Manual)**\n- **Claude → Warp:** `ai-governance\\prompts\\handover_claude_to_warp.md`\n- **Warp → Claude:** `ai-governance\\prompts\\handover_warp_to_claude_review.md`\n- **Protocol:** Structured markdown handover\n- **Verified:** Yes (templates exist and documented)\n- **Use Case:** Design review, governance bootstrap, audit tasks\n- **Limitations:** Manual process (copy/paste to Claude interface)\n\n**Method 3: Direct API (Not Recommended)**\n- **Status:** EXISTS (archived in LLMBridgework)\n- **Function:** Direct Anthropic API calls\n- **Use Case:** Fallback only if Methods 1-2 unavailable\n- **Limitations:** Requires API key management, no MCP integration\n\n⚠️ **Preferred Method:** Use Method 2 (Handover Templates) for governance tasks. Use Method 1 (MCP) for operational agent tasks.\n\n### Claude's Role in the Workflow\n\n1. **Receives requests** from users or handovers from Warp\n2. **Designs solutions** with complete specifications\n3. **Creates WARP.md** handover documents with execution instructions\n4. **Hands off to Warp** for all execution tasks\n5. **Reviews results** when Warp reports back completion\n\n**Invocation from Warp:**\n- Warp uses handover template from `prompts/handover_warp_to_claude_review.md`\n- User manually submits handover to Claude Desktop\n- Claude responds with review findings and revised handover (if needed)\n\n---\n\n## 2. Warp Capabilities\n\n### What Warp CAN Do\n\n**File Operations:**\n- Read files from disk (within C:\\Users\\bermi\\Projects\\ scope)\n- Write files to disk\n- Move and rename files\n- Delete files and directories\n- Create directory structures\n- Search file contents\n\n**Command Execution:**\n- Execute PowerShell commands\n- Run shell scripts (bash, sh)\n- Execute Node.js scripts\n- Run Python scripts\n- Compile code when instructed\n- Run test suites\n\n**Git Operations:**\n- Clone repositories\n- Create and switch branches\n- Stage files (`git add`)\n- Commit changes with messages\n- Push commits to remote\n- Pull latest changes\n- Create tags\n- Manage remotes\n\n**Development Tasks:**\n- Install npm packages\n- Install Python packages (pip)\n- Run build processes\n- Execute test runners\n- Start development servers\n- Run linters and formatters\n\n**System Operations:**\n- Check process status\n- Read environment variables\n- Execute system utilities\n- Perform file system scans\n- Generate reports from execution\n\n### What Warp CANNOT Do\n\n**Design & Planning:**\n- ❌ Design system architectures\n- ❌ Invent new processes or workflows\n- ❌ Make architectural decisions\n- ❌ Create governance policies\n- ❌ Decide on implementation approaches without instructions\n\n**Autonomous Decisions:**\n- ❌ Modify plans without explicit instructions\n- ❌ Skip steps in WARP.md handovers\n- ❌ Interpret ambiguous requirements independently\n- ❌ Make judgment calls on technical tradeoffs\n\n**Secret Management:**\n- ❌ Commit secrets to Git repositories\n- ❌ Display secret values in logs or output\n- ❌ Create secrets without documented policy\n- ❌ Share secrets across project boundaries without authorization\n\n### Warp's Role in the Workflow\n\n1. **Receives WARP.md** handover documents from Claude\n2. **Executes instructions** step-by-step as specified\n3. **Reports progress** and any errors encountered\n4. **Completes handover** with execution summary\n5. **Returns control** to Claude or user\n\n---\n\n## 3. GitHub Role\n\n### GitHub as Source of Truth\n\n**What GitHub Stores:**\n- All governance documents (GLOBAL_AI_RULES.md, CAPABILITIES_MANIFEST.md, SECRETS_POLICY.md)\n- WARP.md templates and project-specific handovers\n- Prompt templates for AI systems\n- Project source code and configurations\n- Documentation and README files\n- Architecture decision records\n\n### GitHub Responsibilities\n\n**Version Control:**\n- Track all changes to governance documents\n- Maintain commit history for audit trails\n- Enable rollback to previous states\n- Tag stable versions of governance rules\n\n**Access Control:**\n- Define who can commit to which repositories\n- Protect main branches with review requirements\n- Enforce commit message standards\n- Manage repository permissions\n\n**Truth Enforcement:**\n- No governance change is valid without a GitHub commit\n- No WARP.md template applies until committed\n- No process modification takes effect until versioned\n\n### What CANNOT Bypass GitHub\n\n- Governance document changes\n- WARP.md template updates\n- Global rule modifications\n- Secret policy changes\n- Capability boundary adjustments\n- Protected zone definitions\n\n### GitHub Integration Points\n\n**Repository:** `ai-governance`  \n**Location:** `C:\\Users\\bermi\\Projects\\ai-governance`  \n**Branch Strategy:** `main` for stable, `draft` for proposals  \n**Commit Requirement:** All governance changes must be committed by Warp\n\n---\n\n## 4. Tool Ecosystem\n\n### n8n Workflow Automation\n\n**Instance:** http://192.168.50.246:5678  \n**Purpose:** Workflow automation and API orchestration\n\n**Capabilities:**\n- Execute scheduled workflows\n- Orchestrate multi-step automation\n- Store credentials in secure vault\n- Provide API endpoints for workflow triggers\n- Integrate with external services (Google, Notion, APIs)\n\n**Access:**\n- Web UI at http://192.168.50.246:5678\n- API access via N8N_API_KEY\n- Credentials vault for secret storage\n\n**Limitations:**\n- Single instance only (do not create additional instances)\n- Workflows must be version-controlled separately from n8n\n- Credential vault is black box (no programmatic extraction)\n\n⚠️ **Needs verification:** Backup strategy for n8n workflows and credentials\n\n---\n\n### MCP Servers\n\n**Available Servers:**\n\n1. **Context7** - Context management (needs verification of specific capabilities)\n2. **GitHub** - Repository operations and issue management\n3. **Memory** - Persistent memory across sessions\n4. **Notion** - Notion API integration\n5. **Playwright** - Browser automation\n6. **Sequential thinking** - Extended reasoning capabilities\n7. **filesystem** - File system operations\n8. **n8n-mcp-docs** - n8n documentation access\n9. **n8n-workflows-docs** - n8n workflow documentation\n\n**MCP Integration Rules:**\n- MCP servers extend Claude's read/analysis capabilities only\n- MCP servers do NOT grant Claude execution capabilities\n- Warp handles all file writes, even if MCP provides read access\n- MCP memory should align with GitHub source of truth\n\n⚠️ **Needs verification:** Complete capability mapping for Context7, Memory, and Sequential thinking servers\n\n---\n\n### Development Tools\n\n**Node.js:**\n- Version management via nvm or direct installation\n- npm for package management\n- Capabilities: Run scripts, install dependencies, execute Node programs\n\n**Python:**\n- Python 3.x environment\n- pip for package management\n- Capabilities: Run scripts, install dependencies, execute Python programs\n\n**PowerShell:**\n- Primary shell for Windows operations\n- Script execution and system administration\n- Capabilities: File operations, process management, system queries\n\n**Git:**\n- Version control operations\n- Integration with GitHub remote repositories\n- Capabilities: Clone, commit, push, pull, branch management\n\n---\n\n## 5. Protected Zones\n\n### Absolute No-Access Zones\n\n**Personal Content:**\n- `C:\\Users\\bermi\\Pictures\\` (and all subdirectories)\n- `C:\\Users\\bermi\\Documents\\Personal\\` (if exists)\n- `C:\\Users\\bermi\\Videos\\Personal\\` (if exists)\n\n**Photo Management:**\n- Any directory containing family photos\n- Photo library databases\n- Image editing project files (outside Projects scope)\n\n**Video Editing:**\n- Fillmore project files\n- Filmora project files\n- Video rendering directories\n\n**Why These Protections Exist:**\n- Privacy: Personal photos and videos are sensitive\n- Data integrity: Editing projects can be corrupted by file operations\n- Irreversibility: Accidental deletion of personal content is catastrophic\n\n### How to Handle Accidental Encounters\n\n**If AI encounters protected content:**\n1. **STOP immediately** - Do not read, analyze, or process\n2. **Report the encounter** to the user\n3. **Do not log file paths** or directory contents\n4. **Do not suggest operations** on protected content\n5. **Wait for user guidance** before proceeding\n\n**If user requests operation on protected zone:**\n1. **Refuse the request** politely but firmly\n2. **Explain the protection policy**\n3. **Suggest alternative approaches** if applicable\n4. **Do not create workarounds** to access protected content\n\n### Project Scope Boundary\n\n**Authorized Scope:** `C:\\Users\\bermi\\Projects\\` (and subdirectories only)\n\n**Operations outside this scope:**\n- Require explicit user confirmation\n- Must be documented in WARP.md handover\n- Should trigger additional verification steps\n\n⚠️ **Needs verification:** Complete list of protected directories (user may have additional zones)\n\n---\n\n## 6. Integration Boundaries\n\n### Claude → Warp Handover\n\n**Trigger:** Claude completes design/planning phase  \n**Mechanism:** WARP.md document  \n**Format:** Structured markdown with step-by-step instructions  \n\n**Handover Must Include:**\n- Clear objective statement\n- Sequenced execution steps\n- Expected outcomes for each step\n- Error handling instructions\n- Verification criteria for completion\n\n**Warp Must:**\n- Acknowledge receipt of handover\n- Execute steps in specified order\n- Report progress after each major step\n- Report completion with summary\n\n---\n\n### Warp → Claude Handover\n\n**Trigger:** Warp completes execution or encounters error  \n**Mechanism:** Execution report  \n**Format:** Summary of actions taken and results  \n\n**Report Must Include:**\n- What was executed\n- Files created/modified\n- Commands run\n- Any errors or warnings\n- Verification of expected outcomes\n\n**Claude Must:**\n- Review the execution report\n- Validate expected outcomes\n- Identify any issues or gaps\n- Determine next steps or completion\n\n---\n\n### GitHub Synchronization Points\n\n**Before Execution:**\n- Warp pulls latest governance documents\n- Warp validates instructions against current rules\n\n**After Execution:**\n- Warp commits all governance changes to GitHub\n- Warp pushes commits to remote\n- Warp confirms GitHub is updated\n\n**On Conflict:**\n- Warp reports conflict to user/Claude\n- Conflict resolution happens before proceeding\n- No automatic conflict resolution without guidance\n\n---\n\n### Error Handling Responsibilities\n\n**Claude's Error Handling:**\n- Analyze error reports from Warp\n- Propose solutions or workarounds\n- Update WARP.md instructions if needed\n- Escalate to user if unresolvable\n\n**Warp's Error Handling:**\n- Capture error details (command, output, exit code)\n- Report error context (what step, what was attempted)\n- Do not attempt improvised solutions\n- Stop execution and report to Claude/user\n\n**User Escalation Triggers:**\n- Protected zone access attempts\n- Secrets exposure or security concerns\n- Governance document conflicts\n- Unclear instructions in WARP.md\n- System-level permission errors\n\n---\n\n## 7. Capability Verification & Updates\n\n### How to Verify Capabilities\n\n**Process:**\n1. Test capability in isolated environment\n2. Document test results\n3. Update this manifest with verified capability\n4. Commit change to GitHub via Warp\n\n**Evidence Required:**\n- Command/action that was tested\n- Expected behavior\n- Actual behavior\n- Any limitations discovered\n\n### How to Request Capability Changes\n\n**Process:**\n1. User or Claude proposes capability change\n2. Claude designs updated capability definition\n3. Claude creates WARP.md to update this manifest\n4. Warp executes update and commits to GitHub\n5. Capability change takes effect after commit\n\n**Not Allowed:**\n- Ad-hoc capability grants during execution\n- Temporary capability expansions\n- Capability assumptions without documentation\n\n---\n\n## 8. Audit & Compliance\n\n### Regular Capability Audits\n\n**Frequency:** Monthly or after major system changes  \n**Process:**\n1. Review actual system usage vs. documented capabilities\n2. Identify capability drift or undocumented actions\n3. Update manifest to reflect reality or enforce boundaries\n4. Commit changes to GitHub\n\n### Compliance Checks\n\n**Before Each Major Execution:**\n- Warp verifies handover aligns with this manifest\n- Warp confirms no protected zone violations\n- Warp validates secret handling procedures\n\n**After Each Major Execution:**\n- Claude reviews execution report against this manifest\n- Claude identifies any capability boundary violations\n- Claude proposes manifest updates if needed\n\n---\n\n## Version History\n\n| Version | Date | Changes | Author |\n|---------|------|---------|--------|\n| 1.0.0 | 2025-12-18 | Initial foundation document | Claude (designed) / Warp (committed) |\n\n---\n\n**Next Review Date:** 2025-01-18  \n**Document Owner:** ai-governance repository  \n**Governance Rule:** RULE 12-15 (Strict Role Separation)",
      "relative_path": "CAPABILITIES_MANIFEST.md",
      "type": "governance",
      "indexed_at": "2025-12-18T11:51:46.9389194+00:00",
      "title": "CAPABILITIES_MANIFEST.md",
      "token_estimate": 3908.0
    },
    {
      "size_bytes": 10245,
      "path": "C:\\Users\\bermi\\Projects\\ai-governance\\HANDOVER_PROTOCOL.md",
      "content": "# HANDOVER_PROTOCOL.md\r\n\r\n**Version:** 1.0.0  \r\n**Last Updated:** 2025-12-18  \r\n**Status:** Mandatory  \r\n**Governance Rule:** Implements RULE 13 (Mandatory Handover)\r\n\r\n---\r\n\r\n## Purpose\r\n\r\nThis document defines the standard format for all handovers between AI systems. This format is **non-optional** and must be followed for every handover.\r\n\r\n**Key Principle:** Handovers prevent ambiguity, interpretation drift, and creative execution.\r\n\r\n---\r\n\r\n## Standard Handover Format\r\n\r\nEvery handover MUST follow this structure:\r\n\r\n```\r\nHANDOVER TO: <Warp | Claude | GitHub>\r\n\r\nTASK TYPE: <Execution | Review | Design>\r\n\r\nSOURCE OF TRUTH:\r\n- Repo(s): <list of repositories>\r\n- Branch: <branch name>\r\n- Rules referenced: <list of governance files>\r\n\r\nGOAL:\r\n<One clear sentence describing the objective>\r\n\r\nCONSTRAINTS:\r\n- <Bullet list of rules, protections, no-bypass requirements>\r\n- <GitHub is source of truth>\r\n- <Fix errors, do not bypass>\r\n- <Protected zones are off-limits>\r\n\r\nEXECUTION STEPS:\r\n1. <First step with clear action>\r\n2. <Second step with clear action>\r\n3. <Subsequent steps...>\r\n\r\nSTOP CONDITION:\r\n<Where execution must pause for human review or next handover>\r\n```\r\n\r\n---\r\n\r\n## Handover Types\r\n\r\n### 1. Claude → Warp (Execution Handover)\r\n\r\n**When to Use:**\r\n- Design phase is complete\r\n- Execution is needed (file ops, commands, Git commits)\r\n- Testing or validation required\r\n\r\n**Template:** See `prompts/handover_claude_to_warp.md`\r\n\r\n**Example:**\r\n```\r\nHANDOVER TO: Warp\r\n\r\nTASK TYPE: Execution\r\n\r\nSOURCE OF TRUTH:\r\n- Repo(s): ai-governance, CHAT_ANALYZER_MASTER\r\n- Branch: main\r\n- Rules: GLOBAL_AI_RULES.md, CAPABILITIES_MANIFEST.md\r\n\r\nGOAL:\r\nCreate PROJECT_RULES.md in CHAT_ANALYZER_MASTER with project-specific conventions.\r\n\r\nCONSTRAINTS:\r\n- GitHub is source of truth\r\n- Follow WARP.md format from examples\r\n- No secrets in file content\r\n- Commit with co-author line\r\n\r\nEXECUTION STEPS:\r\n1. Read existing WARP.md examples from hourly-autopilot-system\r\n2. Create PROJECT_RULES.md with project-specific content\r\n3. Stage file: git add PROJECT_RULES.md\r\n4. Commit with message: \"Add PROJECT_RULES.md for governance compliance\"\r\n5. Include co-author: Co-Authored-By: Warp <agent@warp.dev>\r\n6. Push to GitHub\r\n\r\nSTOP CONDITION:\r\nSTOP after push completes and report commit hash.\r\n```\r\n\r\n---\r\n\r\n### 2. Warp → Claude (Review Handover)\r\n\r\n**When to Use:**\r\n- Execution is complete\r\n- Review or audit needed\r\n- Error encountered requiring design decision\r\n- Next steps need architectural input\r\n\r\n**Template:** See `prompts/handover_warp_to_claude_review.md`\r\n\r\n**Example:**\r\n```\r\nHANDOVER TO: Claude\r\n\r\nTASK TYPE: Review\r\n\r\nSOURCE OF TRUTH:\r\n- Repo(s): ai-governance\r\n- Branch: main\r\n- Rules: GLOBAL_AI_RULES.md\r\n\r\nINPUTS:\r\n- Execution completed: Created 10 governance files\r\n- Commit hash: abc123def456\r\n- All files committed to GitHub\r\n- No errors encountered\r\n\r\nREVIEW GOAL:\r\nVerify governance framework is complete and compliant with RULE 12-15.\r\n\r\nREVIEW CHECKLIST:\r\n- [ ] All required files present\r\n- [ ] GLOBAL_AI_RULES.md contains RULE 12-15\r\n- [ ] HANDOVER_PROTOCOL.md follows specification\r\n- [ ] Prompts directory populated\r\n- [ ] .gitignore protects secrets\r\n- [ ] Commit includes co-author line\r\n\r\nNEXT STEPS:\r\nDetermine if any additional governance documents or project-level updates are needed.\r\n```\r\n\r\n---\r\n\r\n### 3. Claude Self-Routing\r\n\r\n**When to Use:**\r\n- Task received that belongs to Warp\r\n- Immediate routing needed (RULE 15)\r\n\r\n**Template:** See `prompts/task_router.md`\r\n\r\n**Example:**\r\n```\r\nTASK CLASSIFICATION:\r\n\r\nTask: \"Create a backup of the governance repository\"\r\n\r\nClassification: File Operations / Execution\r\n→ Route to: Warp\r\n\r\nReason: Involves Git commands and file operations\r\n\r\nHANDOVER TO: Warp\r\n[... full handover format follows ...]\r\n```\r\n\r\n---\r\n\r\n## Required Elements\r\n\r\n### GOAL (Mandatory)\r\n\r\n**Must be:**\r\n- One clear sentence\r\n- Specific and actionable\r\n- Measurable outcome\r\n\r\n**Good Examples:**\r\n- \"Create WARP.md file in project X with standard template\"\r\n- \"Review execution report for compliance with RULE 12\"\r\n- \"Scan repositories for uncommitted .env files\"\r\n\r\n**Bad Examples:**\r\n- \"Do something with files\" (too vague)\r\n- \"Fix the project\" (not specific)\r\n- \"Make it better\" (not measurable)\r\n\r\n---\r\n\r\n### CONSTRAINTS (Mandatory)\r\n\r\n**Must include:**\r\n- GitHub is source of truth\r\n- Relevant governance rules (by name)\r\n- Protected zone warnings if applicable\r\n- \"Fix errors, do not bypass\" if error handling expected\r\n- Secret handling requirements if secrets involved\r\n\r\n**Minimum Constraints:**\r\n```\r\nCONSTRAINTS:\r\n- GitHub is source of truth\r\n- Follow GLOBAL_AI_RULES.md (RULE 12-15)\r\n- Protected zones off-limits\r\n- No secrets in commits\r\n```\r\n\r\n---\r\n\r\n### EXECUTION STEPS (Mandatory for Warp Handovers)\r\n\r\n**Must be:**\r\n- Numbered sequentially\r\n- Clear and unambiguous\r\n- Executable by Warp without interpretation\r\n- Include verification steps\r\n\r\n**Good Step:**\r\n```\r\n3. Create file: C:\\Users\\bermi\\Projects\\ai-governance\\README.md\r\n   - Content: [specific content or reference to template]\r\n   - Verify file exists after creation\r\n```\r\n\r\n**Bad Step:**\r\n```\r\n3. Make a README or something similar\r\n```\r\n\r\n---\r\n\r\n### STOP CONDITION (Mandatory)\r\n\r\n**Must specify:**\r\n- When to pause execution\r\n- What to report back\r\n- Who receives the report (Claude, User, or both)\r\n\r\n**Good Examples:**\r\n- \"STOP after commit and report commit hash to user\"\r\n- \"STOP if error encountered and hand back to Claude with error details\"\r\n- \"STOP after step 5 for user approval before proceeding to step 6\"\r\n\r\n**Bad Examples:**\r\n- \"Stop when done\" (vague)\r\n- \"Report results\" (to whom?)\r\n\r\n---\r\n\r\n## Handover Anti-Patterns\r\n\r\n### ❌ Ambiguous Instructions\r\n\r\n```\r\nEXECUTION STEPS:\r\n1. Fix the file\r\n2. Update things\r\n3. Make it work\r\n```\r\n\r\n**Problem:** Requires interpretation and judgment calls\r\n\r\n---\r\n\r\n### ❌ Missing Constraints\r\n\r\n```\r\nGOAL: Create new project\r\n\r\nEXECUTION STEPS:\r\n1. Make directories\r\n2. Add files\r\n```\r\n\r\n**Problem:** No reference to governance rules, GitHub, or protections\r\n\r\n---\r\n\r\n### ❌ Combined Roles\r\n\r\n```\r\nHANDOVER TO: Warp\r\n\r\nTASK TYPE: Design and Execute\r\n\r\nGOAL: Figure out what needs to be done and do it\r\n```\r\n\r\n**Problem:** Violates RULE 12 (role separation)\r\n\r\n---\r\n\r\n### ❌ No Stop Condition\r\n\r\n```\r\nEXECUTION STEPS:\r\n1. Do task A\r\n2. Do task B\r\n3. Do task C\r\n```\r\n\r\n**Problem:** Unclear when execution is complete or needs review\r\n\r\n---\r\n\r\n## Handover Validation\r\n\r\nBefore handing over, Claude MUST verify:\r\n\r\n- [ ] Handover uses standard format\r\n- [ ] GOAL is one clear sentence\r\n- [ ] CONSTRAINTS include GitHub and relevant rules\r\n- [ ] EXECUTION STEPS are numbered and specific\r\n- [ ] STOP CONDITION is clear\r\n- [ ] No steps require design decisions by Warp\r\n- [ ] No ambiguous language (\"fix\", \"improve\", \"make better\")\r\n- [ ] Secret handling specified if secrets involved\r\n\r\n**If any checkbox is unchecked, handover is invalid and must be revised.**\r\n\r\n---\r\n\r\n## Handover Acceptance\r\n\r\nWhen Warp receives a handover, Warp MUST verify:\r\n\r\n- [ ] Format matches HANDOVER_PROTOCOL.md\r\n- [ ] All required sections present\r\n- [ ] Steps are within Warp capabilities (per CAPABILITIES_MANIFEST.md)\r\n- [ ] No architectural decisions required\r\n- [ ] Constraints are enforceable\r\n\r\n**If any checkbox is unchecked, Warp must reject the handover and request revision.**\r\n\r\n---\r\n\r\n## Error Handling in Handovers\r\n\r\n### If Warp Encounters Error During Execution\r\n\r\n1. **STOP immediately** at the step where error occurred\r\n2. **Capture error details**:\r\n   - Step number\r\n   - Command/action attempted\r\n   - Error message\r\n   - Exit code (if applicable)\r\n3. **Do not improvise solutions**\r\n4. **Hand back to Claude** with error report using review handover format\r\n5. **Wait for revised handover**\r\n\r\n### If Claude Discovers Error in Design\r\n\r\n1. **Revise the handover** with corrected steps\r\n2. **Mark revision clearly**: \"REVISED HANDOVER (v2)\"\r\n3. **Explain what changed** in brief note at top\r\n4. **Re-submit to Warp**\r\n\r\n---\r\n\r\n## Handover Revisions\r\n\r\n### Version Tracking\r\n\r\n```\r\nHANDOVER TO: Warp\r\nVERSION: 2 (Revised: step 3 corrected)\r\n\r\n[... rest of handover ...]\r\n```\r\n\r\n### Revision Log\r\n\r\nInclude brief note at top:\r\n```\r\nREVISION NOTES:\r\n- v1: Initial handover\r\n- v2: Step 3 corrected - wrong file path\r\n```\r\n\r\n---\r\n\r\n## Checkpoint Handovers\r\n\r\nFor long workflows, use checkpoints:\r\n\r\n```\r\nEXECUTION STEPS:\r\n1. Do step A\r\n2. Do step B\r\n3. Do step C\r\n\r\nSTOP CONDITION:\r\nSTOP after step 3 and report progress.\r\nWait for user approval before continuing to next phase.\r\n\r\nNEXT PHASE:\r\n4. Do step D\r\n5. Do step E\r\n[... to be executed after checkpoint ...]\r\n```\r\n\r\n---\r\n\r\n## Multi-Step Handovers\r\n\r\nFor complex workflows spanning multiple handovers:\r\n\r\n### Phase 1 Handover\r\n```\r\nHANDOVER TO: Warp (Phase 1 of 3)\r\n\r\nGOAL: Complete setup phase\r\n\r\nEXECUTION STEPS:\r\n[... phase 1 steps ...]\r\n\r\nSTOP CONDITION:\r\nSTOP after phase 1 and hand back to Claude for phase 2 planning.\r\n```\r\n\r\n### Phase 2 Handover\r\n```\r\nHANDOVER TO: Warp (Phase 2 of 3)\r\n\r\nDEPENDENCIES:\r\n- Phase 1 completed successfully\r\n- Files from phase 1: X, Y, Z\r\n\r\nGOAL: Complete build phase\r\n\r\nEXECUTION STEPS:\r\n[... phase 2 steps ...]\r\n```\r\n\r\n---\r\n\r\n## Emergency Handovers\r\n\r\nIf immediate action needed (e.g., security incident):\r\n\r\n```\r\nHANDOVER TO: Warp (URGENT)\r\n\r\nPRIORITY: Emergency - Execute Immediately\r\n\r\nGOAL: Rotate compromised API key\r\n\r\nCONSTRAINTS:\r\n- Follow SECRETS_POLICY.md rotation procedure\r\n- No delays for approvals\r\n\r\nEXECUTION STEPS:\r\n1. Update C:\\Users\\bermi\\.env with new ANTHROPIC_API_KEY\r\n2. Update C:\\tools\\.env if key exists there\r\n3. Document rotation in SECRET_ROTATION_LOG.md\r\n4. Commit log to ai-governance\r\n\r\nSTOP CONDITION:\r\nSTOP after commit and verify old key is revoked at provider.\r\n```\r\n\r\n**Note:** Even emergency handovers follow the standard format.\r\n\r\n---\r\n\r\n## Version History\r\n\r\n| Version | Date | Changes | Author |\r\n|---------|------|---------|--------|\r\n| 1.0.0 | 2025-12-18 | Initial handover protocol | Claude (designed) / Warp (committed) |\r\n\r\n---\r\n\r\n**Next Review Date:** 2025-01-18  \r\n**Document Owner:** ai-governance repository  \r\n**Compliance:** RULE 13 (Mandatory Handover Protocol)\r\n\r\n---\r\n\r\n**Co-Authored-By: Warp <agent@warp.dev>**\r\n",
      "relative_path": "HANDOVER_PROTOCOL.md",
      "type": "governance",
      "indexed_at": "2025-12-18T11:51:46.9575487+00:00",
      "title": "HANDOVER_PROTOCOL.md",
      "token_estimate": 2562.0
    },
    {
      "size_bytes": 18764,
      "path": "C:\\Users\\bermi\\Projects\\ai-governance\\SECRETS_POLICY.md",
      "content": "# SECRETS_POLICY.md\n\n**Version:** 1.0.0  \n**Last Updated:** 2025-12-18  \n**Status:** Foundation Document  \n**Governance Rule:** Implements RULE 12-15 (Strict Role Separation) - Secret Handling\n\n---\n\n## Purpose\n\nThis document defines where secrets are stored, how they are handled, and the policies governing their use across the AI governance framework. **This document contains NO secret values** - only locations, patterns, and procedures.\n\n**Critical Principle:** Secrets must never appear in Git repositories, logs, chat history, or any persistent storage except designated secret stores.\n\n---\n\n## 1. Secret Storage Locations\n\n### Primary Secret Stores\n\n#### User Environment File\n**Location:** `C:\\Users\\bermi\\.env`  \n**Purpose:** Working API keys for active development  \n**Access:** User profile only  \n**Contents:** Active credentials for AI services, APIs, and tools\n\n**Known Keys (names only):**\n- `ANTHROPIC_API_KEY`\n- `OPENAI_API_KEY`\n- `ELEVENLABS_API_KEY`\n- `SERPAPI_API_KEY`\n- `NOTION_API_KEY`\n\n**Management:**\n- Primary location for Claude-related API keys\n- Used by terminal sessions and development tools\n- Should be loaded via PowerShell profile or shell startup\n\n---\n\n#### Tools Environment File\n**Location:** `C:\\tools\\.env`  \n**Purpose:** Shared API keys for system-wide tools  \n**Access:** System-wide (all users with access to C:\\tools\\)  \n**Contents:** n8n credentials, shared service API keys\n\n**Known Keys (names only):**\n- `N8N_API_KEY`\n- Shared service credentials (exact keys need verification)\n\n**Management:**\n- Used by n8n and other shared automation tools\n- May be sourced by system-level processes\n- Coordinate changes with n8n workflow dependencies\n\n⚠️ **Needs verification:** Complete inventory of keys in C:\\tools\\.env\n\n---\n\n#### n8n Credentials Vault\n**Location:** n8n instance at http://192.168.50.246:5678  \n**Purpose:** Secure storage for workflow credentials  \n**Access:** Via n8n web UI or API (requires N8N_API_KEY)  \n**Contents:** OAuth tokens, API keys, database credentials used by workflows\n\n**Known Credential Types:**\n- Google service account credentials\n- Google OAuth (Client ID/Secret)\n- External API credentials\n- Database connection strings\n\n**Management:**\n- Accessed through n8n web interface\n- Used by workflow nodes automatically\n- Cannot be extracted programmatically (black box)\n- Must be managed through n8n UI only\n\n---\n\n#### Project-Specific Environment Files\n**Location Pattern:** `C:\\Users\\bermi\\Projects\\{project-name}\\.env`  \n**Purpose:** Project-specific credentials and configuration  \n**Access:** Project scope only  \n**Contents:** API keys, tokens, and secrets specific to individual projects\n\n**Management:**\n- Each project may have its own .env file\n- Should be listed in .gitignore\n- Should not duplicate keys from global .env files\n- Use for project-specific secrets only\n\n**Known Projects with .env files:**\n- (Exact list needs inventory verification)\n\n⚠️ **Needs verification:** Complete inventory of project-specific .env files\n\n---\n\n### Environment Variable Loading\n\n**PowerShell Pattern:**\n```powershell\n# Load from .env file (do not display values)\nGet-Content C:\\Users\\bermi\\.env | ForEach-Object {\n    if ($_ -match '^([^=]+)=(.+)$') {\n        [Environment]::SetEnvironmentVariable($matches[1], $matches[2], 'Process')\n    }\n}\n```\n\n**Node.js Pattern:**\n```javascript\n// Use dotenv package\nrequire('dotenv').config({ path: 'C:\\\\Users\\\\bermi\\\\.env' });\n// Access via process.env.KEY_NAME\n```\n\n**Python Pattern:**\n```python\n# Use python-dotenv package\nfrom dotenv import load_dotenv\nload_dotenv('C:\\\\Users\\\\bermi\\\\.env')\n# Access via os.getenv('KEY_NAME')\n```\n\n---\n\n## 2. Secret Naming Conventions\n\n### Observed Patterns\n\n**API Keys:**\n- Format: `{SERVICE}_API_KEY`\n- Examples: `ANTHROPIC_API_KEY`, `OPENAI_API_KEY`, `NOTION_API_KEY`\n- Convention: Uppercase with underscores\n\n**Service Credentials:**\n- Format: `{SERVICE}_{CREDENTIAL_TYPE}`\n- Examples: `GOOGLE_SERVICE_ACCOUNT`, `GOOGLE_CLIENT_ID`\n- Convention: Uppercase with underscores\n\n**Tokens:**\n- Format: `{SERVICE}_TOKEN` or `{SERVICE}_ACCESS_TOKEN`\n- Examples: `GITHUB_TOKEN`, `N8N_API_KEY` (Note: n8n uses _KEY not _TOKEN)\n- Convention: Uppercase with underscores\n\n### Standard Naming Rules\n\n**Must Follow:**\n1. Always UPPERCASE\n2. Use underscores (\\_) as separators, never hyphens (-)\n3. Start with service/provider name\n4. End with credential type (KEY, TOKEN, SECRET, etc.)\n5. Be descriptive enough to identify the credential's purpose\n\n**Examples of Good Names:**\n- `STRIPE_API_KEY` (clear service and type)\n- `DATABASE_CONNECTION_STRING` (clear purpose)\n- `SLACK_WEBHOOK_URL` (clear service and type)\n\n**Examples of Poor Names:**\n- `apikey` (no service identifier)\n- `my-secret` (uses hyphens, lowercase)\n- `KEY1` (no context)\n\n---\n\n### How to Identify Secrets in Code\n\n**Secret Indicators:**\n- Variable names matching `*_API_KEY`, `*_TOKEN`, `*_SECRET`, `*_PASSWORD`\n- Long alphanumeric strings (20+ characters)\n- Base64-encoded strings in configuration\n- OAuth client IDs/secrets\n- Connection strings with embedded credentials\n- Private keys (PEM format)\n\n**Non-Secrets (Safe to Commit):**\n- Public API endpoints (URLs without credentials)\n- Client IDs that are meant to be public\n- Non-sensitive configuration values\n- Example/placeholder values clearly marked as such\n- Public keys (public/private key pairs)\n\n---\n\n## 3. Handling Rules\n\n### NEVER Do These Things\n\n❌ **NEVER commit secrets to Git repositories**\n- Not in .env files\n- Not in configuration files\n- Not in code comments\n- Not in commit messages\n- Not even in \"private\" repositories\n\n❌ **NEVER display secrets in logs or output**\n- Not in console.log() statements\n- Not in error messages\n- Not in debug output\n- Not in file operation results\n- Mask secrets if logging is required: `API_KEY=***...***`\n\n❌ **NEVER store secrets in chat history**\n- Claude must not see secret values\n- Warp must not display secrets in execution reports\n- Use references like \"the ANTHROPIC_API_KEY from .env\" instead\n- If secret is accidentally shared, rotate it immediately\n\n❌ **NEVER hardcode secrets in source code**\n- Not even temporarily for testing\n- Not in example code\n- Not in commented-out sections\n- Always use environment variables\n\n---\n\n### How to Reference Secrets\n\n**In Scripts:**\n```powershell\n# PowerShell - Reference by name, never by value\n$apiKey = $env:ANTHROPIC_API_KEY\n# Use $apiKey in API calls, never echo/write it\n```\n\n```javascript\n// Node.js - Reference by name\nconst apiKey = process.env.ANTHROPIC_API_KEY;\n// Use apiKey, never console.log() it\n```\n\n```python\n# Python - Reference by name\nimport os\napi_key = os.getenv('ANTHROPIC_API_KEY')\n# Use api_key, never print() it\n```\n\n**In Documentation:**\n- Refer to secrets by their environment variable name\n- Example: \"Configure your `OPENAI_API_KEY` in the .env file\"\n- Never include actual values in documentation\n\n**In Terminal Commands:**\n```powershell\n# Correct: Compute secret in prior step, store as env var\n$apiKey = (Get-Content C:\\Users\\bermi\\.env | Select-String \"ANTHROPIC_API_KEY\").ToString().Split('=')[1]\n# Then use $apiKey in subsequent commands\n\n# WRONG: Never display or echo secrets\necho $env:ANTHROPIC_API_KEY  # DON'T DO THIS\n```\n\n---\n\n### Exception: Test/Development Placeholders\n\n**When to Use Placeholders:**\n- Example configuration files (`.env.example`)\n- Documentation examples\n- Test scaffolding\n\n**Placeholder Format:**\n```bash\n# .env.example\nANTHROPIC_API_KEY=your_anthropic_api_key_here\nOPENAI_API_KEY=your_openai_api_key_here\nN8N_API_KEY=your_n8n_api_key_here\n```\n\n**Requirements:**\n- Must be obviously fake (e.g., \"your_api_key_here\")\n- Must be in `.example` files, not working config files\n- Must be documented as placeholders\n\n---\n\n## 4. Key Rotation Procedures\n\n### When to Rotate Keys\n\n**Mandatory Rotation:**\n- Key is accidentally committed to Git (rotate immediately)\n- Key is exposed in logs or chat history (rotate immediately)\n- Key is shared with unauthorized party (rotate immediately)\n- Key is suspected to be compromised (rotate immediately)\n\n**Scheduled Rotation:**\n- Every 90 days for high-security keys (e.g., ANTHROPIC_API_KEY, OPENAI_API_KEY)\n- Every 180 days for medium-security keys (e.g., SERPAPI_API_KEY)\n- Every 365 days for low-security keys (e.g., public API tokens)\n\n**Triggered Rotation:**\n- After employee/contractor offboarding\n- After security incident\n- After major system changes\n- On request from service provider\n\n⚠️ **Needs verification:** Specific rotation schedule preferences for each key type\n\n---\n\n### How to Rotate Keys\n\n**Step 1: Generate New Key**\n1. Log into service provider dashboard\n2. Generate new API key/token\n3. Copy new key to secure temporary location (not in Git)\n\n**Step 2: Update All Locations**\n1. Update `C:\\Users\\bermi\\.env` with new key\n2. Update `C:\\tools\\.env` if key exists there\n3. Update n8n credentials vault via web UI\n4. Update project-specific .env files if applicable\n\n**Step 3: Test New Key**\n1. Test in isolated environment first\n2. Verify all dependent systems still function\n3. Check all workflows using the key in n8n\n\n**Step 4: Revoke Old Key**\n1. Log into service provider dashboard\n2. Revoke/delete old key\n3. Confirm old key no longer works\n\n**Step 5: Document Rotation**\n1. Update SECRET_ROTATION_LOG.md (metadata only, no values)\n2. Note: key name, rotation date, reason\n3. Commit log to ai-governance repository\n\n---\n\n### Rotation Coordination\n\n**Dependencies to Check:**\n- n8n workflows using the key\n- Scheduled tasks or cron jobs\n- CI/CD pipelines (if any)\n- External integrations\n- Backup scripts\n\n**Notification Required:**\n- If key is shared across projects, notify all project owners\n- If key is used by n8n, test all affected workflows\n- If key is system-wide (C:\\tools\\.env), verify all system processes\n\n---\n\n## 5. Access Control\n\n### Who/What Can Access Secrets\n\n**Claude (AI System):**\n- ❌ Cannot access secret values\n- ✅ Can reference secrets by name in designs\n- ✅ Can specify which secrets are needed for a task\n- ❌ Cannot read .env files directly\n- ❌ Cannot access n8n credentials vault\n\n**Warp (Execution System):**\n- ✅ Can read environment variables in execution context\n- ✅ Can load .env files to set environment variables\n- ❌ Cannot display secret values in output/logs\n- ✅ Can use secrets in API calls (without logging them)\n- ❌ Cannot commit secrets to Git\n\n**User (Human):**\n- ✅ Full access to all secret stores\n- ✅ Can view, edit, and rotate secrets\n- ✅ Can grant/revoke access to secrets\n- ✅ Responsible for secret creation and deletion\n\n**n8n (Workflow System):**\n- ✅ Can access its own credentials vault\n- ✅ Can use secrets in workflow execution\n- ❌ Cannot expose secrets via API responses\n- ✅ Can be granted access to specific credentials via vault\n\n---\n\n### Credential Vault Permissions\n\n**n8n Credentials Vault:**\n- Access controlled by n8n user authentication\n- Credentials are workflow-scoped or global\n- No programmatic extraction of credentials\n- Manage only via n8n web UI at http://192.168.50.246:5678\n\n**Permission Levels:**\n- **Owner:** Can create, read, update, delete credentials\n- **User:** Can use credentials in workflows, cannot view values\n- **None:** Cannot access credentials\n\n⚠️ **Needs verification:** n8n user accounts and their permission levels\n\n---\n\n### Environment File Permissions\n\n**File System Permissions:**\n- `.env` files should be readable only by the user who needs them\n- C:\\Users\\bermi\\.env: User profile only\n- C:\\tools\\.env: System-wide (needs evaluation)\n- Project .env files: Project scope only\n\n**Recommended Permissions:**\n```powershell\n# Set restrictive permissions on .env files\nicacls \"C:\\Users\\bermi\\.env\" /inheritance:r\nicacls \"C:\\Users\\bermi\\.env\" /grant:r \"$env:USERNAME:(R)\"\n```\n\n⚠️ **Needs verification:** Current permissions on .env files and whether they meet security requirements\n\n---\n\n## 6. Secret Discovery\n\n### How to Find Where a Secret is Stored\n\n**Step 1: Check Common Locations**\n1. `C:\\Users\\bermi\\.env` (primary user secrets)\n2. `C:\\tools\\.env` (shared/system secrets)\n3. n8n credentials vault (workflow secrets)\n4. Project-specific .env files\n\n**Step 2: Search by Key Name**\n```powershell\n# Search for key name in .env files\nGet-ChildItem -Path C:\\Users\\bermi\\Projects\\ -Recurse -Filter \".env\" | \n    ForEach-Object { \n        Select-String -Path $_.FullName -Pattern \"KEY_NAME\" \n    }\n```\n\n**Step 3: Check n8n Credentials**\n1. Log into http://192.168.50.246:5678\n2. Navigate to Credentials section\n3. Search by credential name or type\n\n**Step 4: Check Documentation**\n1. Review project README files\n2. Check WARP.md files for secret references\n3. Look for .env.example files\n\n---\n\n### What to Do if Secret Location is Unknown\n\n**If Claude needs a secret for a design:**\n1. Claude specifies which secret is needed (by name)\n2. Claude includes in WARP.md: \"Load {SECRET_NAME} from environment\"\n3. Warp attempts to load from standard locations\n4. Warp reports if secret is not found\n5. User locates or creates secret as needed\n\n**If Warp encounters missing secret during execution:**\n1. Warp reports: \"Secret {NAME} not found in environment\"\n2. Warp stops execution at that point\n3. Warp hands back to Claude/user for guidance\n4. User locates secret or provides it\n5. Warp resumes after secret is available\n\n**If secret needs to be created:**\n1. User generates secret from service provider\n2. User adds to appropriate .env file\n3. User confirms location for documentation\n4. Execution resumes\n\n---\n\n### Emergency Procedures for Compromised Secrets\n\n**Immediate Actions (within 1 hour):**\n1. **STOP all systems** using the compromised secret\n2. **ROTATE the key** at service provider immediately\n3. **UPDATE all locations** with new key\n4. **REVOKE old key** at service provider\n5. **VERIFY** old key no longer works\n\n**Investigation (within 24 hours):**\n1. Determine how secret was compromised\n2. Identify what systems/data were exposed\n3. Check service provider logs for unauthorized usage\n4. Document incident in SECRET_ROTATION_LOG.md\n\n**Follow-up (within 1 week):**\n1. Review and update this secrets policy if needed\n2. Implement additional safeguards if applicable\n3. Notify affected parties if required\n4. Complete post-incident review\n\n**Escalation:**\n- If compromise involves payment/financial keys → contact finance/billing immediately\n- If compromise involves user data → follow data breach procedures\n- If compromise involves multiple keys → perform full security audit\n\n---\n\n## 7. Git Safety Mechanisms\n\n### Pre-Commit Protections\n\n**Required .gitignore patterns:**\n```gitignore\n# Environment files\n.env\n.env.*\n!.env.example\n\n# Secret stores\nsecrets/\ncredentials/\n*.key\n*.pem\n*.p12\n\n# Configuration with secrets\nconfig/local.*\nconfig/*.local.*\n```\n\n**Pre-commit Hook (recommended):**\n```bash\n#!/bin/sh\n# Check for potential secrets before commit\nif git diff --cached | grep -E \"(API_KEY|TOKEN|SECRET|PASSWORD)\" | grep -v \"example\"; then\n    echo \"ERROR: Potential secret detected in commit\"\n    echo \"Review your changes and remove any secrets\"\n    exit 1\nfi\n```\n\n⚠️ **Needs verification:** Whether pre-commit hooks are currently in place\n\n---\n\n### If Secret is Accidentally Committed\n\n**DO NOT JUST DELETE THE FILE IN A NEW COMMIT**\n- The secret is still in Git history\n- The secret must be considered compromised\n\n**Correct Procedure:**\n1. **ROTATE the key immediately** (see Section 4)\n2. **Remove from Git history** using one of these methods:\n   ```bash\n   # Option 1: BFG Repo-Cleaner (recommended)\n   bfg --replace-text secrets.txt repo.git\n   \n   # Option 2: git filter-branch (more manual)\n   git filter-branch --force --index-filter \\\n     'git rm --cached --ignore-unmatch path/to/file' \\\n     --prune-empty --tag-name-filter cat -- --all\n   ```\n3. **Force push** to remote (if already pushed)\n4. **Notify collaborators** to re-clone repository\n5. **Document incident** in SECRET_ROTATION_LOG.md\n\n---\n\n## 8. Secret Documentation\n\n### What to Document (in this repository)\n\n**DO document:**\n- Secret names (e.g., ANTHROPIC_API_KEY)\n- Storage locations (e.g., C:\\Users\\bermi\\.env)\n- Purpose of each secret (e.g., \"Claude API access\")\n- Rotation schedule\n- Rotation history (dates only, no values)\n- Dependencies (which systems use which secrets)\n\n**DO NOT document:**\n- Actual secret values\n- Partial secret values\n- Hints about secret values\n- Secret generation methods that could aid guessing\n\n---\n\n### SECRET_ROTATION_LOG.md Template\n\n```markdown\n# Secret Rotation Log\n\n| Secret Name | Last Rotated | Reason | Next Rotation Due | Rotated By |\n|-------------|--------------|--------|-------------------|------------|\n| ANTHROPIC_API_KEY | 2025-12-18 | Initial setup | 2026-03-18 | User |\n| OPENAI_API_KEY | 2025-12-18 | Initial setup | 2026-03-18 | User |\n\n## Rotation Notes\n\n### 2025-12-18: Initial Setup\n- Established initial secret storage locations\n- Created this rotation log\n- Set 90-day rotation schedule for AI service keys\n```\n\n**Location:** `C:\\Users\\bermi\\Projects\\ai-governance\\SECRET_ROTATION_LOG.md`\n\n⚠️ **Needs verification:** Create SECRET_ROTATION_LOG.md during governance repository setup\n\n---\n\n## 9. Integration with Governance Framework\n\n### WARP.md Secret References\n\n**When Claude designs a WARP.md handover that requires secrets:**\n\n```markdown\n## Prerequisites\n- Required secrets: ANTHROPIC_API_KEY, NOTION_API_KEY\n- Load from: C:\\Users\\bermi\\.env\n- Verification: Confirm secrets are available before execution\n\n## Step 3: Execute API Call\n```powershell\n# Load environment variables (do not display)\n# Use $env:ANTHROPIC_API_KEY in API call\n# Do not log or output the key value\n```\n```\n\n**Warp's responsibilities:**\n- Load secrets from specified location\n- Use secrets in execution without displaying them\n- Report \"secret not found\" if missing, not \"invalid value\"\n- Never include secret values in execution reports\n\n---\n\n### Audit Requirements\n\n**Regular Secret Audits:**\n- Frequency: Quarterly\n- Check: All secrets are documented\n- Check: All secrets are in designated storage locations\n- Check: No secrets in Git history\n- Check: Rotation schedule is being followed\n\n**Audit Checklist:**\n- [ ] All secrets in C:\\Users\\bermi\\.env are documented\n- [ ] All secrets in C:\\tools\\.env are documented\n- [ ] No .env files are committed to Git\n- [ ] .gitignore patterns are in place\n- [ ] Rotation log is up to date\n- [ ] No orphaned secrets exist\n- [ ] All secrets have known owners/purposes\n\n---\n\n## Version History\n\n| Version | Date | Changes | Author |\n|---------|------|---------|--------|\n| 1.0.0 | 2025-12-18 | Initial foundation document | Claude (designed) / Warp (committed) |\n\n---\n\n**Next Review Date:** 2025-01-18  \n**Document Owner:** ai-governance repository  \n**Governance Rule:** RULE 12-15 (Strict Role Separation) - Secret Handling",
      "relative_path": "SECRETS_POLICY.md",
      "type": "governance",
      "indexed_at": "2025-12-18T11:51:46.9929383+00:00",
      "title": "SECRETS_POLICY.md",
      "token_estimate": 4691.0
    },
    {
      "size_bytes": 3032,
      "path": "C:\\Users\\bermi\\Projects\\ai-governance\\SECRET_ROTATION_LOG.md",
      "content": "# Secret Rotation Log\r\n\r\n**Purpose:** Track secret rotations (metadata only, NO VALUES)  \r\n**Governance:** Referenced by SECRETS_POLICY.md  \r\n**Last Updated:** 2025-12-18\r\n\r\n---\r\n\r\n## Rotation Schedule\r\n\r\n| Secret Name | Last Rotated | Reason | Next Rotation Due | Rotated By |\r\n|-------------|--------------|--------|-------------------|------------|\r\n| ANTHROPIC_API_KEY | 2025-12-18 | Initial setup | 2026-03-18 (90 days) | User |\r\n| OPENAI_API_KEY | 2025-12-18 | Initial setup | 2026-03-18 (90 days) | User |\r\n| ELEVENLABS_API_KEY | - | (Needs initial inventory) | TBD | - |\r\n| SERPAPI_API_KEY | - | (Needs initial inventory) | TBD | - |\r\n| NOTION_API_KEY | - | (Needs initial inventory) | TBD | - |\r\n| N8N_API_KEY | - | (Needs initial inventory) | TBD | - |\r\n| GOOGLE_SERVICE_ACCOUNT | - | (Needs initial inventory) | TBD | - |\r\n| GOOGLE_CLIENT_ID | - | (Needs initial inventory) | TBD | - |\r\n\r\n---\r\n\r\n## Rotation Notes\r\n\r\n### 2025-12-18: Initial Setup\r\n\r\n**Actions Taken:**\r\n- Established governance framework with SECRETS_POLICY.md\r\n- Created this rotation log\r\n- Documented existing secret storage locations:\r\n  - C:\\Users\\bermi\\.env (working keys)\r\n  - C:\\tools\\.env (N8N and shared API keys)\r\n  - n8n credentials vault (http://192.168.50.246:5678)\r\n  - Project-specific .env files\r\n\r\n**Next Actions Required:**\r\n- Complete inventory of all secrets in each location\r\n- Establish baseline rotation dates for existing secrets\r\n- Set up calendar reminders for scheduled rotations\r\n- Create .env.example files for each location\r\n\r\n**Rotation Policies Established:**\r\n- High-security keys (AI services): 90-day rotation\r\n- Medium-security keys (search, utilities): 180-day rotation\r\n- Low-security keys (public APIs): 365-day rotation\r\n- Emergency rotation: Immediate upon compromise\r\n\r\n---\r\n\r\n## Incident Log\r\n\r\n### No incidents recorded\r\n\r\n*Format for incidents:*\r\n```\r\n### YYYY-MM-DD: Incident Title\r\n\r\n**Secret Affected:** SECRET_NAME  \r\n**Incident Type:** Accidental commit / Exposure / Suspected compromise  \r\n**Response Time:** X hours  \r\n**Actions Taken:**\r\n- Rotated key immediately\r\n- Updated all locations\r\n- Revoked old key\r\n- Verified no unauthorized usage\r\n\r\n**Root Cause:** [Brief description]  \r\n**Preventive Measures:** [What was changed to prevent recurrence]\r\n```\r\n\r\n---\r\n\r\n## Audit History\r\n\r\n### 2025-12-18: Initial Audit\r\n\r\n**Auditor:** Warp (Governance Bootstrapper)  \r\n**Scope:** Establish baseline documentation  \r\n\r\n**Findings:**\r\n- Secret storage locations documented\r\n- .gitignore patterns in place\r\n- No secrets found in Git history\r\n- Rotation schedule defined\r\n\r\n**Compliance Status:** ✅ Compliant with SECRETS_POLICY.md v1.0.0\r\n\r\n**Next Audit Due:** 2025-03-18 (Quarterly)\r\n\r\n---\r\n\r\n## Version History\r\n\r\n| Version | Date | Changes | Author |\r\n|---------|------|---------|--------|\r\n| 1.0.0 | 2025-12-18 | Initial rotation log | Warp (execution) |\r\n\r\n---\r\n\r\n**Document Owner:** ai-governance repository  \r\n**Referenced By:** SECRETS_POLICY.md\r\n\r\n---\r\n\r\n**Co-Authored-By: Warp <agent@warp.dev>**\r\n",
      "relative_path": "SECRET_ROTATION_LOG.md",
      "type": "governance",
      "indexed_at": "2025-12-18T11:51:47.0079026+00:00",
      "title": "Secret Rotation Log",
      "token_estimate": 758.0
    },
    {
      "size_bytes": 7429,
      "path": "C:\\Users\\bermi\\Projects\\ai-governance\\prompts\\handover_claude_to_warp.md",
      "content": "# HANDOVER: Design to Execution (Claude → Warp)\r\n\r\n**Template Version:** 1.0.0  \r\n**Governance:** RULE 13 (Mandatory Handover Protocol)  \r\n**Usage:** Claude uses this template for all execution handovers to Warp\r\n\r\n---\r\n\r\n## Template\r\n\r\n```\r\n═══════════════════════════════════════════════════════════════\r\n                    HANDOVER TO: Warp\r\n═══════════════════════════════════════════════════════════════\r\n\r\nTASK TYPE: Execution\r\n\r\nSOURCE OF TRUTH:\r\n- GitHub repo(s): <list repositories>\r\n- Branch: <branch name>\r\n- Rules: GLOBAL_AI_RULES.md, CAPABILITIES_MANIFEST.md, <other relevant rules>\r\n\r\n───────────────────────────────────────────────────────────────\r\n\r\nGOAL:\r\n<One clear sentence describing what needs to be accomplished>\r\n\r\n───────────────────────────────────────────────────────────────\r\n\r\nCONSTRAINTS:\r\n- GitHub is source of truth\r\n- Fix errors, do not bypass\r\n- Protected zones are off-limits (Photos, personal files, Fillmore/Filmora)\r\n- <Additional project-specific constraints>\r\n\r\n───────────────────────────────────────────────────────────────\r\n\r\nEXECUTION STEPS:\r\n1. <First step with clear action and verification>\r\n2. <Second step with clear action and verification>\r\n3. <Continue with all steps...>\r\n4. <Each step must be unambiguous>\r\n5. <Include verification steps>\r\n\r\n───────────────────────────────────────────────────────────────\r\n\r\nSTOP CONDITION:\r\nSTOP after step <number> and report <what to report> to <user/Claude>.\r\n\r\n───────────────────────────────────────────────────────────────\r\n```\r\n\r\n---\r\n\r\n## Usage Guidelines\r\n\r\n### When to Use\r\n\r\n- Design phase is complete\r\n- File operations required (read, write, move, delete)\r\n- Command execution needed (shell, scripts, Git)\r\n- Code compilation or testing\r\n- Repository operations (clone, commit, push)\r\n\r\n### Before Handover Checklist\r\n\r\nClaude MUST verify:\r\n- [ ] All steps are within Warp's capabilities (check CAPABILITIES_MANIFEST.md)\r\n- [ ] No architectural decisions required from Warp\r\n- [ ] All paths are absolute and correct\r\n- [ ] Secret handling specified if secrets involved\r\n- [ ] Error handling instructions included\r\n- [ ] Stop condition is clear\r\n- [ ] No ambiguous language (\"fix\", \"improve\", \"make better\")\r\n\r\n### Common Patterns\r\n\r\n**Pattern: Create File**\r\n```\r\n1. Create file: C:\\Users\\bermi\\Projects\\<repo>\\<filename>\r\n   Content: [specific content or reference]\r\n   Verify: File exists after creation\r\n```\r\n\r\n**Pattern: Git Operations**\r\n```\r\n1. Stage files: git add <filename>\r\n2. Commit with message: \"<message>\"\r\n   Include co-author: Co-Authored-By: Warp <agent@warp.dev>\r\n3. Push to remote: git push origin <branch>\r\n4. Verify: Confirm push succeeded\r\n```\r\n\r\n**Pattern: Run Commands**\r\n```\r\n1. Execute: <command>\r\n   Expected output: <what should happen>\r\n   On error: Report error details and stop\r\n```\r\n\r\n**Pattern: Multi-File Operation**\r\n```\r\n1. For each file in [list]:\r\n   - Read file\r\n   - Apply transformation: <specific transformation>\r\n   - Write back to same location\r\n   - Verify: File modified correctly\r\n```\r\n\r\n---\r\n\r\n## Examples\r\n\r\n### Example 1: Simple File Creation\r\n\r\n```\r\nHANDOVER TO: Warp\r\n\r\nTASK TYPE: Execution\r\n\r\nSOURCE OF TRUTH:\r\n- GitHub repo(s): ai-governance\r\n- Branch: main\r\n- Rules: GLOBAL_AI_RULES.md, HANDOVER_PROTOCOL.md\r\n\r\nGOAL:\r\nCreate prompts/example_template.md in ai-governance repository.\r\n\r\nCONSTRAINTS:\r\n- GitHub is source of truth\r\n- Follow existing template format\r\n- No secrets in file\r\n- Commit with co-author line\r\n\r\nEXECUTION STEPS:\r\n1. Create file: C:\\Users\\bermi\\Projects\\ai-governance\\prompts\\example_template.md\r\n   Content:\r\n   ```\r\n   # Example Template\r\n   ...\r\n   ```\r\n2. Stage file: git -C C:\\Users\\bermi\\Projects\\ai-governance add prompts/example_template.md\r\n3. Commit: git -C C:\\Users\\bermi\\Projects\\ai-governance commit -m \"Add example template\"\r\n   Co-author: Co-Authored-By: Warp <agent@warp.dev>\r\n4. Push: git -C C:\\Users\\bermi\\Projects\\ai-governance push origin main\r\n5. Verify: Confirm file visible on GitHub\r\n\r\nSTOP CONDITION:\r\nSTOP after push and report commit hash.\r\n```\r\n\r\n---\r\n\r\n### Example 2: Multi-Step Workflow\r\n\r\n```\r\nHANDOVER TO: Warp\r\n\r\nTASK TYPE: Execution\r\n\r\nSOURCE OF TRUTH:\r\n- GitHub repo(s): CHAT_ANALYZER_MASTER\r\n- Branch: main\r\n- Rules: GLOBAL_AI_RULES.md, PROJECT_RULES.md (if exists)\r\n\r\nGOAL:\r\nAdd standard project structure folders and documentation to CHAT_ANALYZER_MASTER.\r\n\r\nCONSTRAINTS:\r\n- GitHub is source of truth\r\n- Do not modify existing files\r\n- Create only missing folders\r\n- Follow existing project patterns\r\n\r\nEXECUTION STEPS:\r\n1. Check if folders exist: docs/, scripts/, tests/\r\n   List: Get-ChildItem -Path C:\\Users\\bermi\\Projects\\CHAT_ANALYZER_MASTER -Directory\r\n\r\n2. Create missing folders:\r\n   - If docs/ missing: New-Item -ItemType Directory -Path \"...\\docs\"\r\n   - If scripts/ missing: New-Item -ItemType Directory -Path \"...\\scripts\"\r\n   - If tests/ missing: New-Item -ItemType Directory -Path \"...\\tests\"\r\n\r\n3. Create .gitkeep in each new empty folder to track in Git\r\n\r\n4. Stage new folders: git add docs/ scripts/ tests/\r\n\r\n5. Commit: git commit -m \"Add standard project structure folders\"\r\n   Include: Co-Authored-By: Warp <agent@warp.dev>\r\n\r\n6. Push: git push origin main\r\n\r\nSTOP CONDITION:\r\nSTOP after push and report which folders were created.\r\n```\r\n\r\n---\r\n\r\n### Example 3: With Error Handling\r\n\r\n```\r\nHANDOVER TO: Warp\r\n\r\nTASK TYPE: Execution\r\n\r\nSOURCE OF TRUTH:\r\n- GitHub repo(s): ai-governance\r\n- Branch: main\r\n- Rules: GLOBAL_AI_RULES.md, SECRETS_POLICY.md\r\n\r\nGOAL:\r\nScan all project repositories for uncommitted .env files and report findings.\r\n\r\nCONSTRAINTS:\r\n- GitHub is source of truth\r\n- Do NOT display .env contents\r\n- Do NOT modify any files\r\n- Read-only scan operation\r\n\r\nEXECUTION STEPS:\r\n1. Get list of all Git repositories under C:\\Users\\bermi\\Projects\\\r\n   Command: Get-ChildItem -Path C:\\Users\\bermi\\Projects\\ -Directory | Where-Object { Test-Path (Join-Path $_.FullName \".git\") }\r\n\r\n2. For each repository:\r\n   - Check Git status for .env files\r\n   - Command: git -C <repo> status --porcelain | Select-String \".env\"\r\n   - If .env files found: Add to report list (path only, no contents)\r\n   - If error: Report which repo and error message\r\n\r\n3. Compile findings:\r\n   - Total repositories scanned: <count>\r\n   - Repositories with uncommitted .env: <count>\r\n   - List of affected repositories: <list paths only>\r\n\r\n4. If uncommitted .env files found:\r\n   - Do NOT commit them\r\n   - Do NOT display their contents\r\n   - Report findings to user for manual review\r\n\r\nSTOP CONDITION:\r\nSTOP after scan completes and report findings.\r\nDo NOT take any action on .env files without explicit user approval.\r\n```\r\n\r\n---\r\n\r\n## Anti-Patterns to Avoid\r\n\r\n### ❌ Vague Instructions\r\n```\r\nEXECUTION STEPS:\r\n1. Fix the file\r\n2. Make it work\r\n```\r\n\r\n### ❌ Requiring Judgment\r\n```\r\nEXECUTION STEPS:\r\n1. Decide which approach is best\r\n2. Implement the solution\r\n```\r\n\r\n### ❌ Missing Verification\r\n```\r\nEXECUTION STEPS:\r\n1. Create file\r\n2. Done\r\n```\r\n\r\n### ❌ No Error Handling\r\n```\r\nEXECUTION STEPS:\r\n1. Run command\r\n2. Continue regardless of result\r\n```\r\n\r\n---\r\n\r\n## Version History\r\n\r\n| Version | Date | Changes | Author |\r\n|---------|------|---------|--------|\r\n| 1.0.0 | 2025-12-18 | Initial template | Claude (designed) / Warp (committed) |\r\n\r\n---\r\n\r\n**Template Owner:** ai-governance repository  \r\n**Compliance:** RULE 13 (Mandatory Handover Protocol)\r\n\r\n---\r\n\r\n**Co-Authored-By: Warp <agent@warp.dev>**\r\n",
      "relative_path": "prompts\\handover_claude_to_warp.md",
      "type": "governance",
      "indexed_at": "2025-12-18T11:51:47.0406406+00:00",
      "title": "HANDOVER: Design to Execution (Claude → Warp)",
      "token_estimate": 1858.0
    },
    {
      "size_bytes": 9728,
      "path": "C:\\Users\\bermi\\Projects\\ai-governance\\prompts\\task_router.md",
      "content": "# TASK ROUTER: Classification and Routing Logic\r\n\r\n**Template Version:** 1.0.0  \r\n**Governance:** RULE 15 (Automatic Task Routing)  \r\n**Usage:** Claude uses this to classify tasks and route appropriately\r\n\r\n---\r\n\r\n## Purpose\r\n\r\nBefore responding to any task, Claude MUST classify it and route to the appropriate system.\r\n\r\n**Key Principle:** No system can choose to \"just do it here\" — routing is mandatory.\r\n\r\n---\r\n\r\n## Task Classification Decision Tree\r\n\r\n```\r\nTask Received\r\n    │\r\n    ├─> Design/Architecture?\r\n    │   └─> YES → Stay in Claude\r\n    │\r\n    ├─> Review/Audit?\r\n    │   └─> YES → Stay in Claude\r\n    │\r\n    ├─> File Operations?\r\n    │   └─> YES → HANDOVER TO Warp\r\n    │\r\n    ├─> Command Execution?\r\n    │   └─> YES → HANDOVER TO Warp\r\n    │\r\n    ├─> Git Operations?\r\n    │   └─> YES → HANDOVER TO Warp\r\n    │\r\n    ├─> Source of Truth Update?\r\n    │   └─> YES → HANDOVER TO Warp (GitHub commit)\r\n    │\r\n    └─> Mixed (Design + Execution)?\r\n        └─> Split into phases:\r\n            1. Design (Claude)\r\n            2. Handover to Warp\r\n            3. Execution (Warp)\r\n            4. Review (back to Claude if needed)\r\n```\r\n\r\n---\r\n\r\n## Classification Rules\r\n\r\n### Design / Architecture → Stay in Claude\r\n\r\n**Indicators:**\r\n- \"Design a system...\"\r\n- \"Create a plan for...\"\r\n- \"How should I architect...\"\r\n- \"What's the best approach...\"\r\n- \"Review this design...\"\r\n\r\n**Examples:**\r\n- \"Design a data model for X\"\r\n- \"Create an API design for Y\"\r\n- \"Propose an architecture for Z\"\r\n- \"Review this execution report\"\r\n\r\n**Action:** Claude handles directly, no handover needed\r\n\r\n---\r\n\r\n### Review / Audit → Stay in Claude\r\n\r\n**Indicators:**\r\n- \"Review this code...\"\r\n- \"Audit for compliance...\"\r\n- \"Check if this follows...\"\r\n- \"Validate this approach...\"\r\n- \"Does this meet requirements...\"\r\n\r\n**Examples:**\r\n- \"Review this execution report\"\r\n- \"Audit compliance with RULE 12-15\"\r\n- \"Check if all governance files are complete\"\r\n- \"Validate this WARP.md handover\"\r\n\r\n**Action:** Claude handles directly, no handover needed\r\n\r\n---\r\n\r\n### File Operations → HANDOVER TO Warp\r\n\r\n**Indicators:**\r\n- \"Create a file...\"\r\n- \"Update this file...\"\r\n- \"Delete these files...\"\r\n- \"Move files from X to Y...\"\r\n- \"Scan the filesystem...\"\r\n\r\n**Examples:**\r\n- \"Create PROJECT_RULES.md\"\r\n- \"Update GLOBAL_AI_RULES.md\"\r\n- \"Scan for .env files\"\r\n- \"Copy templates to project\"\r\n\r\n**Action:** Create handover using `prompts/handover_claude_to_warp.md`\r\n\r\n---\r\n\r\n### Command Execution → HANDOVER TO Warp\r\n\r\n**Indicators:**\r\n- \"Run this command...\"\r\n- \"Execute this script...\"\r\n- \"Install packages...\"\r\n- \"Compile the code...\"\r\n- \"Run tests...\"\r\n\r\n**Examples:**\r\n- \"Run npm install\"\r\n- \"Execute the build script\"\r\n- \"Test the new feature\"\r\n- \"Check the server status\"\r\n\r\n**Action:** Create handover using `prompts/handover_claude_to_warp.md`\r\n\r\n---\r\n\r\n### Git Operations → HANDOVER TO Warp\r\n\r\n**Indicators:**\r\n- \"Commit these changes...\"\r\n- \"Push to GitHub...\"\r\n- \"Create a branch...\"\r\n- \"Clone this repository...\"\r\n- \"Check Git status...\"\r\n\r\n**Examples:**\r\n- \"Commit the governance files\"\r\n- \"Push to main branch\"\r\n- \"Create a feature branch\"\r\n- \"Check for uncommitted files\"\r\n\r\n**Action:** Create handover using `prompts/handover_claude_to_warp.md`\r\n\r\n---\r\n\r\n### Source of Truth Updates → HANDOVER TO Warp (GitHub)\r\n\r\n**Indicators:**\r\n- \"Update governance docs...\"\r\n- \"Change WARP.md...\"\r\n- \"Modify rules...\"\r\n- \"Add new template...\"\r\n\r\n**Examples:**\r\n- \"Add RULE 16 to GLOBAL_AI_RULES.md\"\r\n- \"Update HANDOVER_PROTOCOL.md\"\r\n- \"Create new prompt template\"\r\n\r\n**Action:**\r\n1. Claude designs the change\r\n2. Create handover to Warp for execution\r\n3. Warp commits to GitHub\r\n\r\n---\r\n\r\n### Mixed Tasks → Split into Phases\r\n\r\n**Indicators:**\r\n- Task requires both design and execution\r\n- Multi-step workflow with different role requirements\r\n\r\n**Examples:**\r\n- \"Create a new project structure with governance compliance\"\r\n  - Phase 1 (Claude): Design the structure\r\n  - Phase 2 (Warp): Execute file creation\r\n  - Phase 3 (Claude): Review results\r\n\r\n**Action:**\r\n1. Claude completes design phase first\r\n2. Create handover for execution phase\r\n3. Wait for Warp to complete\r\n4. Review results if needed\r\n\r\n---\r\n\r\n## Routing Template\r\n\r\nUse this template when routing:\r\n\r\n```\r\nTASK CLASSIFICATION:\r\n\r\nTask: \"<original user task>\"\r\n\r\nClassification: <Design | Review | Execution | Mixed>\r\n\r\nReasoning: <why this classification>\r\n\r\nRoute to: <Claude | Warp | GitHub>\r\n\r\n<If routing to Warp, include full handover>\r\n<If staying in Claude, proceed with response>\r\n<If mixed, break down into phases>\r\n```\r\n\r\n---\r\n\r\n## Examples\r\n\r\n### Example 1: Simple Classification\r\n\r\n**Task:** \"Review the ai-governance repository for completeness\"\r\n\r\n```\r\nTASK CLASSIFICATION:\r\n\r\nTask: \"Review the ai-governance repository for completeness\"\r\n\r\nClassification: Review\r\n\r\nReasoning: Task requires audit of existing files against governance requirements.\r\nThis is within Claude's review capabilities.\r\n\r\nRoute to: Claude\r\n\r\n<Claude proceeds with review directly>\r\n```\r\n\r\n---\r\n\r\n### Example 2: Execution Required\r\n\r\n**Task:** \"Create WARP.md for the ComfyUI project\"\r\n\r\n```\r\nTASK CLASSIFICATION:\r\n\r\nTask: \"Create WARP.md for the ComfyUI project\"\r\n\r\nClassification: Execution (File Operations)\r\n\r\nReasoning: Requires file creation and Git commit. This is Warp's responsibility.\r\n\r\nRoute to: Warp\r\n\r\nHANDOVER TO: Warp\r\n\r\nTASK TYPE: Execution\r\n\r\nSOURCE OF TRUTH:\r\n- GitHub repo(s): ComfyUI\r\n- Branch: main\r\n- Rules: GLOBAL_AI_RULES.md, CAPABILITIES_MANIFEST.md\r\n\r\nGOAL:\r\nCreate WARP.md file in ComfyUI project with project-specific guidance.\r\n\r\nCONSTRAINTS:\r\n- GitHub is source of truth\r\n- Follow WARP.md format from examples\r\n- Include ComfyUI-specific patterns\r\n- Commit with co-author line\r\n\r\nEXECUTION STEPS:\r\n1. Read example WARP.md from hourly-autopilot-system for reference\r\n2. Create C:\\Users\\bermi\\Projects\\ComfyUI\\WARP.md\r\n   Content: [project-specific WARP.md content]\r\n3. Stage: git -C C:\\Users\\bermi\\Projects\\ComfyUI add WARP.md\r\n4. Commit: git commit -m \"Add WARP.md for governance compliance\"\r\n   Co-author: Co-Authored-By: Warp <agent@warp.dev>\r\n5. Push: git push origin main\r\n\r\nSTOP CONDITION:\r\nSTOP after push and report commit hash.\r\n```\r\n\r\n---\r\n\r\n### Example 3: Mixed Task\r\n\r\n**Task:** \"Set up governance compliance for all projects\"\r\n\r\n```\r\nTASK CLASSIFICATION:\r\n\r\nTask: \"Set up governance compliance for all projects\"\r\n\r\nClassification: Mixed (Design + Execution)\r\n\r\nReasoning: Requires architectural planning (what files, what content)\r\nAND execution (creating files, committing to Git)\r\n\r\nRoute to: Multi-phase workflow\r\n\r\nPHASE 1 (Claude - Design):\r\n1. Analyze current state of all projects\r\n2. Design standard governance structure\r\n3. Create file templates and content\r\n4. Prepare execution plan\r\n\r\nPHASE 2 (Warp - Execution):\r\n<After Phase 1 complete, create handover>\r\n\r\nPHASE 3 (Claude - Review):\r\n<After Phase 2 complete, review results>\r\n```\r\n\r\n---\r\n\r\n## Special Cases\r\n\r\n### Case: Urgent/Emergency\r\n\r\nEven urgent tasks must be routed correctly:\r\n\r\n```\r\nTASK: \"Rotate compromised API key NOW\"\r\n\r\nClassification: Execution (Emergency)\r\n\r\nRoute to: Warp (URGENT)\r\n\r\n<Create emergency handover with URGENT priority>\r\n```\r\n\r\n**Note:** Emergency handovers still follow standard format.\r\n\r\n---\r\n\r\n### Case: Ambiguous Task\r\n\r\nIf task classification is unclear:\r\n\r\n```\r\nTASK: \"Fix the project\"\r\n\r\nClassification: AMBIGUOUS\r\n\r\nAction: Request clarification from user\r\n\r\nResponse: \"I need clarification to route this correctly:\r\n- What needs fixing? (design issue vs. execution issue)\r\n- Which project?\r\n- What is the expected outcome?\r\n\r\nThis will help me determine if this is:\r\n- Design work (Claude handles)\r\n- Execution work (handover to Warp)\r\n- Mixed (multi-phase approach)\"\r\n```\r\n\r\n---\r\n\r\n### Case: Question vs. Action\r\n\r\n**Question:** \"How should I structure the governance framework?\"\r\n- Classification: Design question\r\n- Route to: Claude (answer directly)\r\n\r\n**Action:** \"Structure the governance framework\"\r\n- Classification: Execution\r\n- Route to: Warp (after Claude designs it)\r\n\r\n---\r\n\r\n## Anti-Patterns to Avoid\r\n\r\n### ❌ Choosing Convenience Over Rules\r\n\r\n**Wrong:**\r\n```\r\nTask: \"Create a file\"\r\nReasoning: \"I could just show the content, user can create it\"\r\nAction: Display content instead of handing over\r\n```\r\n\r\n**Right:**\r\n```\r\nTask: \"Create a file\"\r\nClassification: Execution\r\nRoute to: Warp\r\n<Full handover>\r\n```\r\n\r\n---\r\n\r\n### ❌ Combining Roles\r\n\r\n**Wrong:**\r\n```\r\nTask: \"Design and implement new feature\"\r\nAction: Do both in one step\r\n```\r\n\r\n**Right:**\r\n```\r\nTask: \"Design and implement new feature\"\r\nClassification: Mixed\r\nPhase 1: Design (Claude)\r\nPhase 2: Implement (Warp via handover)\r\n```\r\n\r\n---\r\n\r\n### ❌ Skipping Classification\r\n\r\n**Wrong:**\r\n```\r\nUser: \"Update the file\"\r\nClaude: <just does it>\r\n```\r\n\r\n**Right:**\r\n```\r\nUser: \"Update the file\"\r\nClaude: <classifies first>\r\nClassification: Execution\r\nRoute to: Warp\r\n<Handover>\r\n```\r\n\r\n---\r\n\r\n## Routing Checklist\r\n\r\nBefore responding, Claude MUST ask:\r\n\r\n- [ ] Have I classified this task?\r\n- [ ] Is classification correct per routing rules?\r\n- [ ] If execution required, am I handing over?\r\n- [ ] If staying in Claude, is this truly design/review?\r\n- [ ] If mixed, have I broken into phases?\r\n- [ ] Am I following RULE 15 (no choosing to \"just do it\")?\r\n\r\n**If any checkbox unchecked, stop and reclassify.**\r\n\r\n---\r\n\r\n## Version History\r\n\r\n| Version | Date | Changes | Author |\r\n|---------|------|---------|--------|\r\n| 1.0.0 | 2025-12-18 | Initial task router | Adapted from hourly-autopilot-system / Warp |\r\n\r\n---\r\n\r\n**Template Owner:** ai-governance repository  \r\n**Compliance:** RULE 15 (Automatic Task Routing)\r\n\r\n---\r\n\r\n**Co-Authored-By: Warp <agent@warp.dev>**\r\n",
      "relative_path": "prompts\\task_router.md",
      "type": "governance",
      "indexed_at": "2025-12-18T11:51:47.0655212+00:00",
      "title": "TASK ROUTER: Classification and Routing Logic",
      "token_estimate": 2432.0
    },
    {
      "size_bytes": 9179,
      "path": "C:\\Users\\bermi\\Projects\\ai-governance\\prompts\\handover_warp_to_claude_review.md",
      "content": "# HANDOVER: Execution to Review (Warp → Claude)\r\n\r\n**Template Version:** 1.0.0  \r\n**Governance:** RULE 13 (Mandatory Handover Protocol)  \r\n**Usage:** Warp uses this template for all review handovers to Claude\r\n\r\n---\r\n\r\n## Template\r\n\r\n```\r\n═══════════════════════════════════════════════════════════════\r\n                    HANDOVER TO: Claude\r\n═══════════════════════════════════════════════════════════════\r\n\r\nTASK TYPE: Review\r\n\r\nSOURCE OF TRUTH:\r\n- GitHub repo(s): <list repositories>\r\n- Branch: <branch name>\r\n- Rules: GLOBAL_AI_RULES.md, <other relevant rules>\r\n\r\n───────────────────────────────────────────────────────────────\r\n\r\nINPUTS:\r\n- Execution completed: <what was executed>\r\n- Files created/modified: <list with paths>\r\n- Commands run: <list of commands with exit codes>\r\n- Commit hash(es): <if applicable>\r\n- Errors/warnings: <if any>\r\n\r\n───────────────────────────────────────────────────────────────\r\n\r\nREVIEW GOAL:\r\n<One clear sentence: what needs to be reviewed and why>\r\n\r\n───────────────────────────────────────────────────────────────\r\n\r\nREVIEW CHECKLIST:\r\n- [ ] <First verification item>\r\n- [ ] <Second verification item>\r\n- [ ] <Continue with all items to check>\r\n\r\n───────────────────────────────────────────────────────────────\r\n\r\nNEXT STEPS:\r\n<What should happen after review - leave decision to Claude>\r\n\r\n───────────────────────────────────────────────────────────────\r\n```\r\n\r\n---\r\n\r\n## Usage Guidelines\r\n\r\n### When to Use\r\n\r\n- Execution is complete (successful or with errors)\r\n- Review or audit needed before proceeding\r\n- Error encountered requiring design decision\r\n- Checkpoint reached requiring approval\r\n- Compliance verification needed\r\n\r\n### Before Handover Checklist\r\n\r\nWarp MUST verify:\r\n- [ ] Execution summary is complete\r\n- [ ] All relevant file paths included\r\n- [ ] Command results documented\r\n- [ ] Errors clearly explained (if any)\r\n- [ ] Review goal is specific\r\n- [ ] Checklist items are verifiable\r\n\r\n---\r\n\r\n## Common Patterns\r\n\r\n**Pattern: Successful Completion Review**\r\n```\r\nINPUTS:\r\n- Execution completed: Created 10 governance files\r\n- Files created: <list>\r\n- Commit hash: abc123def456\r\n- No errors encountered\r\n\r\nREVIEW GOAL:\r\nVerify all governance files are complete and compliant with RULE 12-15.\r\n\r\nREVIEW CHECKLIST:\r\n- [ ] All required files present\r\n- [ ] File contents match specifications\r\n- [ ] No secrets in commits\r\n- [ ] Commit message follows conventions\r\n```\r\n\r\n**Pattern: Error Handover**\r\n```\r\nINPUTS:\r\n- Execution stopped at step 3\r\n- Error: <error message>\r\n- Exit code: 1\r\n- Files modified before error: <list>\r\n\r\nREVIEW GOAL:\r\nDiagnose error and determine corrective action for step 3.\r\n\r\nREVIEW CHECKLIST:\r\n- [ ] Error root cause identified\r\n- [ ] Is retry safe?\r\n- [ ] Are modified files in consistent state?\r\n- [ ] Should rollback be performed?\r\n```\r\n\r\n**Pattern: Checkpoint Review**\r\n```\r\nINPUTS:\r\n- Phase 1 completed successfully\r\n- Files created: <list>\r\n- Verification: All steps passed\r\n- Ready for Phase 2\r\n\r\nREVIEW GOAL:\r\nVerify Phase 1 output and approve proceeding to Phase 2.\r\n\r\nREVIEW CHECKLIST:\r\n- [ ] Phase 1 outputs correct\r\n- [ ] Dependencies for Phase 2 satisfied\r\n- [ ] No issues requiring attention\r\n- [ ] Safe to proceed\r\n```\r\n\r\n---\r\n\r\n## Examples\r\n\r\n### Example 1: Successful Governance Setup\r\n\r\n```\r\nHANDOVER TO: Claude\r\n\r\nTASK TYPE: Review\r\n\r\nSOURCE OF TRUTH:\r\n- GitHub repo(s): ai-governance\r\n- Branch: main\r\n- Rules: GLOBAL_AI_RULES.md, HANDOVER_PROTOCOL.md\r\n\r\nINPUTS:\r\n- Execution completed: Created ai-governance repository with full structure\r\n- Files created:\r\n  • README.md\r\n  • .gitignore\r\n  • GLOBAL_AI_RULES.md\r\n  • HANDOVER_PROTOCOL.md\r\n  • CAPABILITIES_MANIFEST.md\r\n  • SECRETS_POLICY.md\r\n  • SECRET_ROTATION_LOG.md\r\n  • prompts/handover_claude_to_warp.md\r\n  • prompts/task_router.md\r\n  • prompts/handover_warp_to_claude_review.md\r\n- Commands run:\r\n  • git init (exit code 0)\r\n  • git add . (exit code 0)\r\n  • git commit -m \"Initial governance framework\" (exit code 0)\r\n- Commit hash: 1a2b3c4d5e6f\r\n- No errors or warnings\r\n\r\nREVIEW GOAL:\r\nVerify ai-governance repository is complete, compliant with RULE 12-15, and ready for use.\r\n\r\nREVIEW CHECKLIST:\r\n- [ ] All 10 required files created\r\n- [ ] GLOBAL_AI_RULES.md contains RULE 12-15\r\n- [ ] HANDOVER_PROTOCOL.md follows specification\r\n- [ ] CAPABILITIES_MANIFEST.md has Claude/Warp boundaries\r\n- [ ] SECRETS_POLICY.md has storage locations\r\n- [ ] Prompts directory fully populated\r\n- [ ] .gitignore protects secrets\r\n- [ ] Commit message includes co-author\r\n- [ ] No secrets in repository\r\n- [ ] README explains usage\r\n\r\nNEXT STEPS:\r\nDetermine if project-level updates needed or if governance framework is complete.\r\n```\r\n\r\n---\r\n\r\n### Example 2: Error During Execution\r\n\r\n```\r\nHANDOVER TO: Claude\r\n\r\nTASK TYPE: Review\r\n\r\nSOURCE OF TRUTH:\r\n- GitHub repo(s): CHAT_ANALYZER_MASTER\r\n- Branch: main\r\n- Rules: GLOBAL_AI_RULES.md\r\n\r\nINPUTS:\r\n- Execution stopped at step 4 of 6\r\n- Error message: \"fatal: remote origin already exists\"\r\n- Exit code: 128\r\n- Commands run successfully before error:\r\n  • Created PROJECT_RULES.md (success)\r\n  • git add PROJECT_RULES.md (exit code 0)\r\n  • git commit -m \"Add PROJECT_RULES\" (exit code 0)\r\n- Failed command:\r\n  • git remote add origin https://github.com/bermingham85/CHAT_ANALYZER_MASTER.git (exit code 128)\r\n- Files modified: PROJECT_RULES.md (committed locally, not pushed)\r\n\r\nREVIEW GOAL:\r\nResolve remote origin conflict and determine safe way to complete push to GitHub.\r\n\r\nREVIEW CHECKLIST:\r\n- [ ] Is existing remote correct?\r\n- [ ] Should we use existing remote or reconfigure?\r\n- [ ] Is commit in safe state?\r\n- [ ] Can we proceed with push using existing remote?\r\n- [ ] Do we need to revise handover steps?\r\n\r\nNEXT STEPS:\r\nProvide revised handover or guidance to complete push operation safely.\r\n```\r\n\r\n---\r\n\r\n### Example 3: Compliance Audit\r\n\r\n```\r\nHANDOVER TO: Claude\r\n\r\nTASK TYPE: Review\r\n\r\nSOURCE OF TRUTH:\r\n- GitHub repo(s): All 18 project repositories\r\n- Branch: main\r\n- Rules: GLOBAL_AI_RULES.md, SECRETS_POLICY.md\r\n\r\nINPUTS:\r\n- Execution completed: Scanned all repositories for .env files\r\n- Scan results:\r\n  • Total repositories scanned: 18\r\n  • Repositories with .env files: 5\r\n  • Repositories with uncommitted .env: 2\r\n  • Repositories with .env in .gitignore: 5\r\n  • Repositories missing .gitignore: 3\r\n- Affected repositories with uncommitted .env:\r\n  • C:\\Users\\bermi\\Projects\\midjourney-news-automation\r\n  • C:\\Users\\bermi\\Projects\\openai-notion-mcp\r\n- No errors encountered\r\n\r\nREVIEW GOAL:\r\nAudit secret handling compliance and determine corrective actions for non-compliant repositories.\r\n\r\nREVIEW CHECKLIST:\r\n- [ ] Are uncommitted .env files a security risk?\r\n- [ ] Should .env files be added to .gitignore?\r\n- [ ] Do any .env files contain production secrets?\r\n- [ ] Are there repositories that need .gitignore created?\r\n- [ ] What is the remediation plan?\r\n\r\nNEXT STEPS:\r\nDetermine if secrets need rotation and create handover for remediation actions.\r\n```\r\n\r\n---\r\n\r\n## Review Response Format\r\n\r\nWhen Claude receives review handover, Claude SHOULD respond with:\r\n\r\n```\r\nREVIEW COMPLETE\r\n\r\nSTATUS: <Approved | Issues Found | Requires Revision>\r\n\r\nFINDINGS:\r\n- <Finding 1>\r\n- <Finding 2>\r\n- <Continue...>\r\n\r\nCOMPLIANCE:\r\n- <Compliant | Non-compliant> with <rule>\r\n- <Reasoning>\r\n\r\nNEXT ACTION:\r\n<What should happen next>\r\n\r\n<If Issues Found or Requires Revision, include revised handover or guidance>\r\n```\r\n\r\n---\r\n\r\n## Error Handling Patterns\r\n\r\n### Pattern: Recoverable Error\r\n\r\n```\r\nINPUTS:\r\n- Error at step X: <error>\r\n- Error is recoverable: Yes\r\n- Suggested retry action: <action>\r\n\r\nREVIEW GOAL:\r\nConfirm retry is safe and provide revised step X instructions.\r\n```\r\n\r\n### Pattern: Unrecoverable Error\r\n\r\n```\r\nINPUTS:\r\n- Error at step X: <error>\r\n- Error is unrecoverable: Yes\r\n- Rollback needed: Yes/No\r\n- State before error: <description>\r\n\r\nREVIEW GOAL:\r\nDetermine if rollback needed and design alternative approach.\r\n```\r\n\r\n### Pattern: Ambiguous Situation\r\n\r\n```\r\nINPUTS:\r\n- Situation: <description>\r\n- Warp assessment: <what Warp thinks>\r\n- Uncertainty: <what is unclear>\r\n\r\nREVIEW GOAL:\r\nClarify ambiguous situation and provide guidance for how to proceed.\r\n```\r\n\r\n---\r\n\r\n## Anti-Patterns to Avoid\r\n\r\n### ❌ Incomplete Execution Report\r\n\r\n```\r\nINPUTS:\r\n- Execution completed\r\n- Some errors\r\n\r\nREVIEW GOAL:\r\nCheck if it's okay\r\n```\r\n\r\n**Problem:** Too vague, no details for Claude to review\r\n\r\n---\r\n\r\n### ❌ No Review Checklist\r\n\r\n```\r\nINPUTS:\r\n- Files created: X, Y, Z\r\n\r\nREVIEW GOAL:\r\nReview the files\r\n\r\n<no checklist>\r\n```\r\n\r\n**Problem:** Unclear what to verify\r\n\r\n---\r\n\r\n### ❌ Asking Warp to Decide\r\n\r\n```\r\nINPUTS:\r\n- Error encountered\r\n\r\nREVIEW GOAL:\r\nTell me what to do next\r\n\r\nNEXT STEPS:\r\nShould I retry or give up?\r\n```\r\n\r\n**Problem:** Violates role separation — design decisions belong to Claude\r\n\r\n---\r\n\r\n## Version History\r\n\r\n| Version | Date | Changes | Author |\r\n|---------|------|---------|--------|\r\n| 1.0.0 | 2025-12-18 | Initial template | Warp (execution) |\r\n\r\n---\r\n\r\n**Template Owner:** ai-governance repository  \r\n**Compliance:** RULE 13 (Mandatory Handover Protocol)\r\n\r\n---\r\n\r\n**Co-Authored-By: Warp <agent@warp.dev>**\r\n",
      "relative_path": "prompts\\handover_warp_to_claude_review.md",
      "type": "governance",
      "indexed_at": "2025-12-18T11:51:47.0977607+00:00",
      "title": "HANDOVER: Execution to Review (Warp → Claude)",
      "token_estimate": 2295.0
    },
    {
      "content": "# agent-agency-mcp - Warp Rules\r\n\r\n**Project Type:** nodejs\r\n**Governance:** Follows GLOBAL_AI_RULES.md from ai-governance\r\n**Last Updated:** 2025-12-18\r\n\r\n---\r\n\r\n## Project-Specific Rules\r\n\r\n### Technology Stack\r\n- Node.js project\r\n- Package manager: npm\r\n- Config: package.json\r\n- Install: `npm install`\r\n- Build: `npm run build` (if defined)\r\n- Test: `npm test` (if defined)\r\n\r\n### Protected Files\r\n- .env (secrets)\r\n- node_modules/ (dependencies)\r\n- dist/ (build artifacts)\r\n- .git/ (version control)\r\n\r\n### Governance Integration\r\nThis project follows:\r\n- GLOBAL_AI_RULES.md (RULE 12-15)\r\n- CAPABILITIES_MANIFEST.md\r\n- HANDOVER_PROTOCOL.md\r\n- SECRETS_POLICY.md\r\n\r\n**Source:** C:\\Users\\bermi\\Projects\\ai-governance\r\n\r\n---\r\n\r\n## Project Notes\r\n<!-- Add project-specific context here -->\r\n\r\n---\r\n\r\n**Co-Authored-By: Warp <agent@warp.dev>**\r\n",
      "relative_path": "projects\\agent-agency-mcp\\WARP.md",
      "path": "C:\\Users\\bermi\\Projects\\agent-agency-mcp\\WARP.md",
      "project_name": "agent-agency-mcp",
      "indexed_at": "2025-12-18T11:51:47.1371792+00:00",
      "title": "agent-agency-mcp - Warp Rules",
      "token_estimate": 211.0,
      "type": "project_rules",
      "size_bytes": 843
    },
    {
      "content": "# ai-orchestrator - Warp Rules\r\n\r\n**Project Type:** nodejs\r\n**Governance:** Follows GLOBAL_AI_RULES.md from ai-governance\r\n**Last Updated:** 2025-12-18\r\n\r\n---\r\n\r\n## Project-Specific Rules\r\n\r\n### Technology Stack\r\n- Node.js project\r\n- Package manager: npm\r\n- Config: package.json\r\n- Install: `npm install`\r\n- Build: `npm run build` (if defined)\r\n- Test: `npm test` (if defined)\r\n\r\n### Protected Files\r\n- .env (secrets)\r\n- node_modules/ (dependencies)\r\n- dist/ (build artifacts)\r\n- .git/ (version control)\r\n\r\n### Governance Integration\r\nThis project follows:\r\n- GLOBAL_AI_RULES.md (RULE 12-15)\r\n- CAPABILITIES_MANIFEST.md\r\n- HANDOVER_PROTOCOL.md\r\n- SECRETS_POLICY.md\r\n\r\n**Source:** C:\\Users\\bermi\\Projects\\ai-governance\r\n\r\n---\r\n\r\n## Project Notes\r\n<!-- Add project-specific context here -->\r\n\r\n---\r\n\r\n**Co-Authored-By: Warp <agent@warp.dev>**\r\n",
      "relative_path": "projects\\ai-orchestrator\\WARP.md",
      "path": "C:\\Users\\bermi\\Projects\\ai-orchestrator\\WARP.md",
      "project_name": "ai-orchestrator",
      "indexed_at": "2025-12-18T11:51:47.1408239+00:00",
      "title": "ai-orchestrator - Warp Rules",
      "token_estimate": 211.0,
      "type": "project_rules",
      "size_bytes": 842
    },
    {
      "content": "# ai-orchestrator-platform - Warp Rules\r\n\r\n**Project Type:** nodejs\r\n**Governance:** Follows GLOBAL_AI_RULES.md from ai-governance\r\n**Last Updated:** 2025-12-18\r\n\r\n---\r\n\r\n## Project-Specific Rules\r\n\r\n### Technology Stack\r\n- Node.js project\r\n- Package manager: npm\r\n- Config: package.json\r\n- Install: `npm install`\r\n- Build: `npm run build` (if defined)\r\n- Test: `npm test` (if defined)\r\n\r\n### Protected Files\r\n- .env (secrets)\r\n- node_modules/ (dependencies)\r\n- dist/ (build artifacts)\r\n- .git/ (version control)\r\n\r\n### Governance Integration\r\nThis project follows:\r\n- GLOBAL_AI_RULES.md (RULE 12-15)\r\n- CAPABILITIES_MANIFEST.md\r\n- HANDOVER_PROTOCOL.md\r\n- SECRETS_POLICY.md\r\n\r\n**Source:** C:\\Users\\bermi\\Projects\\ai-governance\r\n\r\n---\r\n\r\n## Project Notes\r\n<!-- Add project-specific context here -->\r\n\r\n---\r\n\r\n**Co-Authored-By: Warp <agent@warp.dev>**\r\n",
      "relative_path": "projects\\ai-orchestrator-platform\\WARP.md",
      "path": "C:\\Users\\bermi\\Projects\\ai-orchestrator-platform\\WARP.md",
      "project_name": "ai-orchestrator-platform",
      "indexed_at": "2025-12-18T11:51:47.1443158+00:00",
      "title": "ai-orchestrator-platform - Warp Rules",
      "token_estimate": 213.0,
      "type": "project_rules",
      "size_bytes": 851
    },
    {
      "content": "# AutoDesign-POD-Empire - Warp Rules\r\n\r\n**Project Type:** generic\r\n**Governance:** Follows GLOBAL_AI_RULES.md from ai-governance\r\n**Last Updated:** 2025-12-18\r\n\r\n---\r\n\r\n## Project-Specific Rules\r\n\r\n### Technology Stack\r\n\r\n### Protected Files\r\n- .env (secrets)\r\n- node_modules/ (dependencies)\r\n- dist/ (build artifacts)\r\n- .git/ (version control)\r\n\r\n### Governance Integration\r\nThis project follows:\r\n- GLOBAL_AI_RULES.md (RULE 12-15)\r\n- CAPABILITIES_MANIFEST.md\r\n- HANDOVER_PROTOCOL.md\r\n- SECRETS_POLICY.md\r\n\r\n**Source:** C:\\Users\\bermi\\Projects\\ai-governance\r\n\r\n---\r\n\r\n## Project Notes\r\n<!-- Add project-specific context here -->\r\n\r\n---\r\n\r\n**Co-Authored-By: Warp <agent@warp.dev>**\r\n",
      "relative_path": "projects\\AutoDesign-POD-Empire\\WARP.md",
      "path": "C:\\Users\\bermi\\Projects\\AutoDesign-POD-Empire\\WARP.md",
      "project_name": "AutoDesign-POD-Empire",
      "indexed_at": "2025-12-18T11:51:47.1465425+00:00",
      "title": "AutoDesign-POD-Empire - Warp Rules",
      "token_estimate": 171.0,
      "type": "project_rules",
      "size_bytes": 684
    },
    {
      "content": "# bermech-n8n-workflows - Warp Rules\r\n\r\n**Project Type:** generic\r\n**Governance:** Follows GLOBAL_AI_RULES.md from ai-governance\r\n**Last Updated:** 2025-12-18\r\n\r\n---\r\n\r\n## Project-Specific Rules\r\n\r\n### Technology Stack\r\n\r\n### Protected Files\r\n- .env (secrets)\r\n- node_modules/ (dependencies)\r\n- dist/ (build artifacts)\r\n- .git/ (version control)\r\n\r\n### Governance Integration\r\nThis project follows:\r\n- GLOBAL_AI_RULES.md (RULE 12-15)\r\n- CAPABILITIES_MANIFEST.md\r\n- HANDOVER_PROTOCOL.md\r\n- SECRETS_POLICY.md\r\n\r\n**Source:** C:\\Users\\bermi\\Projects\\ai-governance\r\n\r\n---\r\n\r\n## Project Notes\r\n<!-- Add project-specific context here -->\r\n\r\n---\r\n\r\n**Co-Authored-By: Warp <agent@warp.dev>**\r\n",
      "relative_path": "projects\\bermech-n8n-workflows\\WARP.md",
      "path": "C:\\Users\\bermi\\Projects\\bermech-n8n-workflows\\WARP.md",
      "project_name": "bermech-n8n-workflows",
      "indexed_at": "2025-12-18T11:51:47.1488855+00:00",
      "title": "bermech-n8n-workflows - Warp Rules",
      "token_estimate": 171.0,
      "type": "project_rules",
      "size_bytes": 684
    },
    {
      "content": "# bermech-wordpress-theme - Warp Rules\r\n\r\n**Project Type:** generic\r\n**Governance:** Follows GLOBAL_AI_RULES.md from ai-governance\r\n**Last Updated:** 2025-12-18\r\n\r\n---\r\n\r\n## Project-Specific Rules\r\n\r\n### Technology Stack\r\n\r\n### Protected Files\r\n- .env (secrets)\r\n- node_modules/ (dependencies)\r\n- dist/ (build artifacts)\r\n- .git/ (version control)\r\n\r\n### Governance Integration\r\nThis project follows:\r\n- GLOBAL_AI_RULES.md (RULE 12-15)\r\n- CAPABILITIES_MANIFEST.md\r\n- HANDOVER_PROTOCOL.md\r\n- SECRETS_POLICY.md\r\n\r\n**Source:** C:\\Users\\bermi\\Projects\\ai-governance\r\n\r\n---\r\n\r\n## Project Notes\r\n<!-- Add project-specific context here -->\r\n\r\n---\r\n\r\n**Co-Authored-By: Warp <agent@warp.dev>**\r\n",
      "relative_path": "projects\\bermech-wordpress-theme\\WARP.md",
      "path": "C:\\Users\\bermi\\Projects\\bermech-wordpress-theme\\WARP.md",
      "project_name": "bermech-wordpress-theme",
      "indexed_at": "2025-12-18T11:51:47.1507005+00:00",
      "title": "bermech-wordpress-theme - Warp Rules",
      "token_estimate": 172.0,
      "type": "project_rules",
      "size_bytes": 686
    },
    {
      "content": "# brand-launchpad-service - Warp Rules\r\n\r\n**Project Type:** nodejs\r\n**Governance:** Follows GLOBAL_AI_RULES.md from ai-governance\r\n**Last Updated:** 2025-12-18\r\n\r\n---\r\n\r\n## Project-Specific Rules\r\n\r\n### Technology Stack\r\n- Node.js project\r\n- Package manager: npm\r\n- Config: package.json\r\n- Install: `npm install`\r\n- Build: `npm run build` (if defined)\r\n- Test: `npm test` (if defined)\r\n\r\n### Protected Files\r\n- .env (secrets)\r\n- node_modules/ (dependencies)\r\n- dist/ (build artifacts)\r\n- .git/ (version control)\r\n\r\n### Governance Integration\r\nThis project follows:\r\n- GLOBAL_AI_RULES.md (RULE 12-15)\r\n- CAPABILITIES_MANIFEST.md\r\n- HANDOVER_PROTOCOL.md\r\n- SECRETS_POLICY.md\r\n\r\n**Source:** C:\\Users\\bermi\\Projects\\ai-governance\r\n\r\n---\r\n\r\n## Project Notes\r\n<!-- Add project-specific context here -->\r\n\r\n---\r\n\r\n**Co-Authored-By: Warp <agent@warp.dev>**\r\n",
      "relative_path": "projects\\brand-launchpad-service\\WARP.md",
      "path": "C:\\Users\\bermi\\Projects\\brand-launchpad-service\\WARP.md",
      "project_name": "brand-launchpad-service",
      "indexed_at": "2025-12-18T11:51:47.1528436+00:00",
      "title": "brand-launchpad-service - Warp Rules",
      "token_estimate": 213.0,
      "type": "project_rules",
      "size_bytes": 850
    },
    {
      "content": "# CHAT_ANALYZER_MASTER - Warp Rules\r\n\r\n**Project Type:** generic\r\n**Governance:** Follows GLOBAL_AI_RULES.md from ai-governance\r\n**Last Updated:** 2025-12-18\r\n\r\n---\r\n\r\n## Project-Specific Rules\r\n\r\n### Technology Stack\r\n\r\n### Protected Files\r\n- .env (secrets)\r\n- node_modules/ (dependencies)\r\n- dist/ (build artifacts)\r\n- .git/ (version control)\r\n\r\n### Governance Integration\r\nThis project follows:\r\n- GLOBAL_AI_RULES.md (RULE 12-15)\r\n- CAPABILITIES_MANIFEST.md\r\n- HANDOVER_PROTOCOL.md\r\n- SECRETS_POLICY.md\r\n\r\n**Source:** C:\\Users\\bermi\\Projects\\ai-governance\r\n\r\n---\r\n\r\n## Project Notes\r\n<!-- Add project-specific context here -->\r\n\r\n---\r\n\r\n**Co-Authored-By: Warp <agent@warp.dev>**\r\n",
      "relative_path": "projects\\CHAT_ANALYZER_MASTER\\WARP.md",
      "path": "C:\\Users\\bermi\\Projects\\CHAT_ANALYZER_MASTER\\WARP.md",
      "project_name": "CHAT_ANALYZER_MASTER",
      "indexed_at": "2025-12-18T11:51:47.1546919+00:00",
      "title": "CHAT_ANALYZER_MASTER - Warp Rules",
      "token_estimate": 171.0,
      "type": "project_rules",
      "size_bytes": 683
    },
    {
      "content": "# chatgpt-mcp-server - Warp Rules\r\n\r\n**Project Type:** nodejs\r\n**Governance:** Follows GLOBAL_AI_RULES.md from ai-governance\r\n**Last Updated:** 2025-12-18\r\n\r\n---\r\n\r\n## Project-Specific Rules\r\n\r\n### Technology Stack\r\n- Node.js project\r\n- Package manager: npm\r\n- Config: package.json\r\n- Install: `npm install`\r\n- Build: `npm run build` (if defined)\r\n- Test: `npm test` (if defined)\r\n\r\n### Protected Files\r\n- .env (secrets)\r\n- node_modules/ (dependencies)\r\n- dist/ (build artifacts)\r\n- .git/ (version control)\r\n\r\n### Governance Integration\r\nThis project follows:\r\n- GLOBAL_AI_RULES.md (RULE 12-15)\r\n- CAPABILITIES_MANIFEST.md\r\n- HANDOVER_PROTOCOL.md\r\n- SECRETS_POLICY.md\r\n\r\n**Source:** C:\\Users\\bermi\\Projects\\ai-governance\r\n\r\n---\r\n\r\n## Project Notes\r\n<!-- Add project-specific context here -->\r\n\r\n---\r\n\r\n**Co-Authored-By: Warp <agent@warp.dev>**\r\n",
      "relative_path": "projects\\chatgpt-mcp-server\\WARP.md",
      "path": "C:\\Users\\bermi\\Projects\\chatgpt-mcp-server\\WARP.md",
      "project_name": "chatgpt-mcp-server",
      "indexed_at": "2025-12-18T11:51:47.1574234+00:00",
      "title": "chatgpt-mcp-server - Warp Rules",
      "token_estimate": 212.0,
      "type": "project_rules",
      "size_bytes": 845
    },
    {
      "content": "# ComfyUI - Warp Rules\r\n\r\n**Project Type:** python\r\n**Governance:** Follows GLOBAL_AI_RULES.md from ai-governance\r\n**Last Updated:** 2025-12-18\r\n\r\n---\r\n\r\n## Project-Specific Rules\r\n\r\n### Technology Stack\r\n- Python project\r\n- Package manager: pip\r\n- Config: requirements.txt\r\n- Install: `pip install -r requirements.txt`\r\n- Test: `pytest` (if configured)\r\n\r\n### Protected Files\r\n- .env (secrets)\r\n- node_modules/ (dependencies)\r\n- dist/ (build artifacts)\r\n- .git/ (version control)\r\n\r\n### Governance Integration\r\nThis project follows:\r\n- GLOBAL_AI_RULES.md (RULE 12-15)\r\n- CAPABILITIES_MANIFEST.md\r\n- HANDOVER_PROTOCOL.md\r\n- SECRETS_POLICY.md\r\n\r\n**Source:** C:\\Users\\bermi\\Projects\\ai-governance\r\n\r\n---\r\n\r\n## Project Notes\r\n<!-- Add project-specific context here -->\r\n\r\n---\r\n\r\n**Co-Authored-By: Warp <agent@warp.dev>**\r\n",
      "relative_path": "projects\\ComfyUI\\WARP.md",
      "path": "C:\\Users\\bermi\\Projects\\ComfyUI\\WARP.md",
      "project_name": "ComfyUI",
      "indexed_at": "2025-12-18T11:51:47.1598662+00:00",
      "title": "ComfyUI - Warp Rules",
      "token_estimate": 205.0,
      "type": "project_rules",
      "size_bytes": 819
    },
    {
      "content": "# gremlos-world-puppet - Warp Rules\r\n\r\n**Project Type:** nodejs\r\n**Governance:** Follows GLOBAL_AI_RULES.md from ai-governance\r\n**Last Updated:** 2025-12-18\r\n\r\n---\r\n\r\n## Project-Specific Rules\r\n\r\n### Technology Stack\r\n- Node.js project\r\n- Package manager: npm\r\n- Config: package.json\r\n- Install: `npm install`\r\n- Build: `npm run build` (if defined)\r\n- Test: `npm test` (if defined)\r\n\r\n### Protected Files\r\n- .env (secrets)\r\n- node_modules/ (dependencies)\r\n- dist/ (build artifacts)\r\n- .git/ (version control)\r\n\r\n### Governance Integration\r\nThis project follows:\r\n- GLOBAL_AI_RULES.md (RULE 12-15)\r\n- CAPABILITIES_MANIFEST.md\r\n- HANDOVER_PROTOCOL.md\r\n- SECRETS_POLICY.md\r\n\r\n**Source:** C:\\Users\\bermi\\Projects\\ai-governance\r\n\r\n---\r\n\r\n## Project Notes\r\n<!-- Add project-specific context here -->\r\n\r\n---\r\n\r\n**Co-Authored-By: Warp <agent@warp.dev>**\r\n",
      "relative_path": "projects\\gremlos-world-puppet\\WARP.md",
      "path": "C:\\Users\\bermi\\Projects\\gremlos-world-puppet\\WARP.md",
      "project_name": "gremlos-world-puppet",
      "indexed_at": "2025-12-18T11:51:47.1620322+00:00",
      "title": "gremlos-world-puppet - Warp Rules",
      "token_estimate": 212.0,
      "type": "project_rules",
      "size_bytes": 847
    },
    {
      "content": "# WARP.md\r\n\r\nThis file provides guidance to WARP (warp.dev) when working with code in this repository.\r\n\r\n## Overview\r\n\r\nThis is a **multi-LLM task orchestration system** that harvests notes/conversations, extracts atomic tasks, routes them to the best tool/LLM, saves outputs, runs QA loops, and archives results. The system runs hourly via n8n workflows and uses Notion as the central hub.\r\n\r\n## Architecture\r\n\r\n### Central Components\r\n\r\n- **Notion**: Single source of truth with 5 databases (Tasks, Tool Registry, Suggestions, Agents, Application Form)\r\n- **OneDrive/SharePoint**: Artifact storage following strict folder structure\r\n- **n8n**: Workflow orchestration engine (all automation runs here)\r\n\r\n### Multi-LLM Platform Stack\r\n\r\nThe system intelligently routes tasks across platforms based on capabilities:\r\n- **OpenAI GPT-4o**: Fast extraction, code generation, structured data\r\n- **Claude Sonnet**: Deep reasoning, blueprints, long-form analysis\r\n- **Perplexity Sonar**: Chat + citations for research\r\n- **Perplexity Search API**: Raw search results with filters\r\n- **Gemini + Maps**: Location/geo tasks (experimental)\r\n- **Wave API**: Accounting operations (requires Pro subscription)\r\n- **Microsoft To Do**: Human-actionable task reminders\r\n\r\n### Core Workflows\r\n\r\n1. **Hourly Autopilot (HH:05)**: Ingest → Extract → Route → Dispatch → Save → Notify\r\n2. **Hourly Check (HH:55)**: Status checks, clarifications, QA pass/fail, archive/rework\r\n3. **Daily Tool Registry (04:00)**: API version checks, reliability metrics, delta reports\r\n\r\n## Folder Structure\r\n\r\nAll outputs follow this pattern:\r\n```\r\n/Projects/<ProjectName>/<Workstream>/<YYYY-MM-DD>/<task-id>/\r\n```\r\n\r\nEach task folder contains output files and `metadata.json`.\r\n\r\n## Key Files\r\n\r\n### Documentation\r\n- `docs/IMPLEMENTATION_CHECKLIST.md`: Day-by-day Week 1 setup guide\r\n- `docs/PLATFORM_SETUP.md`: API key provisioning and integration details\r\n- `README.md`: Complete system overview and acceptance criteria\r\n\r\n### Schemas\r\n- `notion-schemas/tasks-db.json`: Tasks DB structure (TaskID, Status, TargetPlatform, etc.)\r\n- `notion-schemas/tool-registry-db.json`: Tool Registry with capabilities and health metrics\r\n- `notion-schemas/suggestions-agents-appform-dbs.json`: Suggestions, Agents, and Application Form schemas\r\n\r\n### Prompts\r\n- `prompts/extract-tasks-openai.txt`: OpenAI task extraction prompt (outputs CG-### IDs)\r\n- `prompts/router.txt`: Task routing logic based on Tool Registry\r\n- Additional prompts for Claude extraction, evaluator, QA, and agent candidates\r\n\r\n### Workflows\r\n- `n8n-workflows/`: Template workflows for import into n8n (may be empty initially)\r\n\r\n## Data Flow\r\n\r\n1. **Note Ingestion**: Email labels, Slack/Teams, or Notion Notes DB\r\n2. **Extraction**: Parallel calls to OpenAI + Claude, merge & dedupe by 85%+ similarity\r\n3. **Routing**: Function node consults Tool Registry, selects target platform based on task type and capabilities\r\n4. **Dispatch**: HTTP Request nodes call target API with task context\r\n5. **Storage**: OneDrive node creates folder structure and saves outputs\r\n6. **Notification**: Digest email sent with summary\r\n7. **QA Loop**: Hourly Check verifies status, requests clarifications, runs approval flow\r\n\r\n## Status States\r\n\r\nTasks flow through: `New → InProgress → WaitingClarify/QA → Done → Archived` (or `Rework`)\r\n\r\n## Routing Logic\r\n\r\nThe router (`prompts/router.txt`) uses these rules:\r\n- `code` → OpenAI (fast)\r\n- `blueprint` or deep reasoning → Claude\r\n- `info-gather` with citations → Perplexity Chat\r\n- Raw search → Perplexity Search API\r\n- `local-search` or geo → Gemini Maps (experimental)\r\n- `message/clarify` → Microsoft To Do\r\n- Accounting → Wave API (checks subscription status, fallback to To Do)\r\n- Approved agents → `agent:<id>`\r\n\r\n## Development Commands\r\n\r\nThis repository is primarily configuration-based (JSON schemas and text prompts), not code.\r\n\r\n### Working with Notion Schemas\r\n```pwsh\r\n# View schema structure\r\nGet-Content notion-schemas/tasks-db.json | ConvertFrom-Json | ConvertTo-Json -Depth 10\r\n\r\n# Validate JSON\r\nTest-Json -Path notion-schemas/tasks-db.json\r\n```\r\n\r\n### Working with Prompts\r\n```pwsh\r\n# View prompt content\r\nGet-Content prompts/extract-tasks-openai.txt\r\n\r\n# Search for specific routing rules\r\nSelect-String -Path prompts/router.txt -Pattern \"type:\"\r\n```\r\n\r\n### Testing n8n Workflows\r\nn8n workflows are managed through the n8n UI. To test:\r\n1. Import workflow JSON from `n8n-workflows/`\r\n2. Configure credentials in n8n vault\r\n3. Use \"Execute Workflow\" button for manual trigger\r\n4. Check \"Executions\" tab for logs\r\n\r\n### Validating Folder Structure\r\n```pwsh\r\n# Check OneDrive folder structure (adjust path to your OneDrive mount)\r\nGet-ChildItem -Path \"C:\\Users\\bermi\\OneDrive\\Projects\" -Recurse -Directory | \r\n  Where-Object { $_.FullName -match '\\d{4}-\\d{2}-\\d{2}' }\r\n```\r\n\r\n## Security\r\n\r\n- All API keys stored in n8n Credentials vault (never in workflow JSON)\r\n- Least-privilege scopes (e.g., `Tasks.ReadWrite` for Microsoft Graph, not `User.ReadWrite.All`)\r\n- Budget caps set on OpenAI/Anthropic accounts\r\n- Quarterly key rotation required (set calendar reminder)\r\n\r\n## Key Improvements Over Original Design\r\n\r\n1. **Perplexity dual mode**: Chat for summaries, Search API for citation control\r\n2. **Wave Pro gating**: Pre-check subscription before routing accounting tasks\r\n3. **Gemini experimental tier**: Optional branch for Maps/Computer-Use\r\n4. **Agent approval gate**: Central Application Form mandatory for new agents\r\n5. **Daily registry versioning**: Track API changes and capability updates\r\n\r\n## Common Patterns\r\n\r\n### Adding a New Platform\r\n1. Add entry to `notion-schemas/tool-registry-db.json` with capabilities\r\n2. Update `prompts/router.txt` with routing rule\r\n3. Create work order prompt in `prompts/` directory\r\n4. Add n8n HTTP Request node with credential\r\n5. Test with sample task and verify output folder creation\r\n\r\n### Creating a New Agent\r\n1. Detect recurring pattern (3+ similar tasks)\r\n2. Generate Agent Spec using `prompts/agent-candidate.txt`\r\n3. Create entry in Agents DB (Status = Proposed)\r\n4. Fill Central Application Form (includes business case, QA plan)\r\n5. Owner reviews and approves\r\n6. Add `agent:<id>` to router target list\r\n\r\n### Debugging Failed Tasks\r\n1. Check Notion Tasks DB for task status and NextAction field\r\n2. Review n8n Executions tab for workflow errors\r\n3. Verify Tool Registry shows target platform as Active\r\n4. Check OneDrive folder for partial outputs or error logs\r\n5. If WaitingClarify, check email for clarification request sent to Originator\r\n\r\n## Week 1 Implementation\r\n\r\nFollow `docs/IMPLEMENTATION_CHECKLIST.md` for day-by-day setup:\r\n- **Day 1**: Foundations (Notion, storage, API keys, n8n)\r\n- **Day 2**: Extract → Route → To Do flow\r\n- **Day 3**: Perplexity & Gemini integration\r\n- **Day 4**: Suggestions & Agent candidates\r\n- **Day 5**: Tool Registry daily refresh\r\n- **Day 6**: 24h pilot with QA loops\r\n- **Day 7**: Review, lock folder structure, approve first agent\r\n\r\n## Acceptance Criteria\r\n\r\n- [ ] Hourly autopilot runs without manual intervention\r\n- [ ] Tasks appear in Notion + Microsoft To Do\r\n- [ ] Outputs saved to correct OneDrive folders with metadata\r\n- [ ] Daily Tool Registry email delivered at 04:00\r\n- [ ] Platform approval list reviewed in <15 minutes\r\n- [ ] First agent approved and running via Application Form\r\n- [ ] QA pass/fail and rework loops functional\r\n\r\n## Owner\r\n\r\n**Owner**: Michael  \r\n**Automation Lead**: [Assign VA or freelancer]  \r\n**Created**: 2025-10-26\r\n",
      "relative_path": "projects\\hourly-autopilot-system\\WARP.md",
      "path": "C:\\Users\\bermi\\Projects\\hourly-autopilot-system\\WARP.md",
      "project_name": "hourly-autopilot-system",
      "indexed_at": "2025-12-18T11:51:47.1647427+00:00",
      "title": "WARP.md",
      "token_estimate": 1885.0,
      "type": "project_rules",
      "size_bytes": 7538
    },
    {
      "content": "# lm-cleaning-booking - Warp Rules\r\n\r\n**Project Type:** nodejs\r\n**Governance:** Follows GLOBAL_AI_RULES.md from ai-governance\r\n**Last Updated:** 2025-12-18\r\n\r\n---\r\n\r\n## Project-Specific Rules\r\n\r\n### Technology Stack\r\n- Node.js project\r\n- Package manager: npm\r\n- Config: package.json\r\n- Install: `npm install`\r\n- Build: `npm run build` (if defined)\r\n- Test: `npm test` (if defined)\r\n\r\n### Protected Files\r\n- .env (secrets)\r\n- node_modules/ (dependencies)\r\n- dist/ (build artifacts)\r\n- .git/ (version control)\r\n\r\n### Governance Integration\r\nThis project follows:\r\n- GLOBAL_AI_RULES.md (RULE 12-15)\r\n- CAPABILITIES_MANIFEST.md\r\n- HANDOVER_PROTOCOL.md\r\n- SECRETS_POLICY.md\r\n\r\n**Source:** C:\\Users\\bermi\\Projects\\ai-governance\r\n\r\n---\r\n\r\n## Project Notes\r\n<!-- Add project-specific context here -->\r\n\r\n---\r\n\r\n**Co-Authored-By: Warp <agent@warp.dev>**\r\n",
      "relative_path": "projects\\lm-cleaning-booking\\WARP.md",
      "path": "C:\\Users\\bermi\\Projects\\lm-cleaning-booking\\WARP.md",
      "project_name": "lm-cleaning-booking",
      "indexed_at": "2025-12-18T11:51:47.1678352+00:00",
      "title": "lm-cleaning-booking - Warp Rules",
      "token_estimate": 212.0,
      "type": "project_rules",
      "size_bytes": 846
    },
    {
      "content": "# WARP.md\r\n\r\nThis file provides guidance to WARP (warp.dev) when working with code in this repository.\r\n\r\n## Project Overview\r\n\r\nMulti-platform agentic automation framework that transforms RSS news articles into engaging social media posts with AI-generated Midjourney images, then publishes to Google Docs.\r\n\r\n**Architecture**: Sequential agent pipeline\r\n- RSS Feed → Article Fetcher → Content Generator → Prompt Engineer → Midjourney Agent → Google Docs Integration\r\n\r\n## Essential Commands\r\n\r\n### Running the System\r\n```bash\r\n# Run complete workflow with default settings\r\nnpm start\r\n\r\n# Run with custom RSS feed and article limit\r\nnode index.js run https://feeds.bbci.co.uk/news/rss.xml 3\r\n\r\n# Test configuration without processing articles\r\nnode index.js test\r\n\r\n# Start webhook server only (for Midjourney callbacks)\r\nnode index.js webhook\r\n```\r\n\r\n### Development\r\n```bash\r\n# Development mode with auto-reload\r\nnpm run dev\r\n\r\n# Run specific agents standalone\r\nnpm run agent:fetch        # Test RSS fetching\r\nnpm run agent:content      # Test content generation\r\nnpm run agent:midjourney   # Test Midjourney integration\r\n```\r\n\r\n### Testing Individual Components\r\n```bash\r\n# Test article fetcher with custom feed\r\nnode agents/article-fetcher.js https://example.com/feed.xml\r\n\r\n# Test content generator with mock data\r\nnode agents/content-generator.js\r\n\r\n# Test Midjourney with custom prompt\r\nnode agents/midjourney-agent.js \"a beautiful sunset over mountains --ar 16:9\"\r\n\r\n# Test workflow standalone\r\nnode workflows/rss-to-image.js\r\n```\r\n\r\n## Environment Configuration\r\n\r\n### Required API Keys\r\nThe project uses environment variables from `.env`. Key locations:\r\n- **Local project**: `.env` (create from `.env.example`)\r\n- **User-level**: `C:\\Users\\bermi\\.env` (contains working keys)\r\n- **Tools directory**: `C:\\tools\\.env` (contains N8N and shared API keys)\r\n- **Project-specific**: `C:\\tools\\bp_poc\\.env`, `C:\\tools\\home-motion\\.env`, etc.\r\n\r\n**API Keys Available in Shared Locations:**\r\n- ✅ `ANTHROPIC_API_KEY` - Available in both `C:\\Users\\bermi\\.env` and `C:\\tools\\.env`\r\n- ✅ `OPENAI_API_KEY` - Available in both locations\r\n- ✅ `ELEVENLABS_API_KEY` - Available for voice synthesis\r\n- ✅ `SERPAPI_API_KEY` - Available for search integration\r\n- ✅ `NOTION_API_KEY` - Available in `C:\\tools\\.env`\r\n- ✅ `N8N_API_KEY`, `N8N_BASE_URL`, `N8N_WEBHOOK_URL` - Available at https://n8n.bermech.com\r\n- ✅ `GOOGLE_SERVICE_ACCOUNT` - Available in `C:\\Users\\bermi\\.env` (JSON format)\r\n- ✅ `GOOGLE_CLIENT_ID` - Available for OAuth workflows\r\n\r\n**Project-Specific Variables (Need Configuration):**\r\n- ⚠️ `DISCORD_TOKEN`, `DISCORD_CHANNEL_ID`, `DISCORD_USER_ID`, `DISCORD_SERVER_ID` - Discord integration\r\n- ⚠️ `MIDJOURNEY_API_KEY` - userapi.ai Midjourney API\r\n- ⚠️ `GOOGLE_REFRESH_TOKEN`, `GOOGLE_DOC_ID` - Google Docs specific config\r\n- ⚠️ `RSS_FEED_URL` - Target RSS feed to process\r\n\r\n### AI Provider Selection\r\nThe system automatically selects available AI provider:\r\n1. **Content Generator** (`agents/content-generator.js`): Tries Claude first, falls back to OpenAI if unavailable\r\n2. Preferred model can be specified: `await contentGenerator.run(article, 'LinkedIn', 'claude')` or `'openai'`\r\n\r\n## Code Architecture\r\n\r\n### Agent Pattern\r\nAll agents follow a consistent structure:\r\n```javascript\r\nclass MyAgent {\r\n  constructor() {\r\n    this.logger = logger.child({ agent: 'MyAgent' });\r\n    // Initialize dependencies\r\n  }\r\n  \r\n  async run(input, options) {\r\n    // Main execution logic\r\n    // Always returns structured result\r\n  }\r\n}\r\n```\r\n\r\nEach agent is:\r\n- **Autonomous** - Can run standalone via `node agents/agent-name.js`\r\n- **Logged** - Uses Winston child logger with agent-specific context\r\n- **Configurable** - Reads from centralized `config/config.js`\r\n\r\n### Configuration System\r\n**Centralized with Zod validation** (`config/config.js`):\r\n- All environment variables validated at startup\r\n- Type-safe config object exported\r\n- Throws descriptive errors for missing/invalid config\r\n\r\n### Workflow Orchestration\r\nThe `RSSToImageWorkflow` (`workflows/rss-to-image.js`) coordinates agents:\r\n\r\n**Lifecycle:**\r\n1. `initialize()` - Start webhook server for Midjourney callbacks\r\n2. Process each article through agent pipeline sequentially\r\n3. `saveResults()` - Write JSON output to `outputs/` directory\r\n4. `cleanup()` - Stop webhook server\r\n\r\n**Error Handling:**\r\n- Partial failures recorded in result object\r\n- Google Docs errors don't fail entire workflow\r\n- All errors logged with full context\r\n\r\n### Webhook Server\r\n**Critical for Midjourney integration** (`integrations/webhook-server.js`):\r\n- Receives async callbacks from Midjourney API\r\n- Must be publicly accessible (use ngrok for local development)\r\n- Stores task results in-memory for retrieval\r\n- Health check endpoint: `http://localhost:3000/health`\r\n\r\n### Logging\r\nWinston-based logging (`utils/logger.js`):\r\n- **Development**: Console + file logging\r\n- **Production**: File logging only\r\n- Logs written to `logs/automation.log` and `logs/error.log`\r\n- Child loggers provide component-specific context\r\n\r\n## Important Implementation Details\r\n\r\n### Midjourney Integration\r\n**NEW: Browser-based automation** (`agents/midjourney-browser-agent.js`):\r\n- ✅ **100% Legal** - Uses Playwright to automate Discord browser interaction\r\n- ✅ **No API Costs** - Bypasses userapi.ai completely\r\n- ✅ **Transparent** - Colored status cards show every step\r\n- `initialize()` - Opens Discord in Chromium browser\r\n- `sendImagineCommand(prompt)` - Types /imagine command\r\n- `waitForImages()` - Monitors for 4-image grid to appear\r\n- `clickUpscale(index)` - Clicks U1-U4 button\r\n- `downloadImage()` - Legally downloads upscaled image\r\n\r\n**Status Card System:**\r\n- 🟢 Green: Step completed\r\n- 🟠 Orange: In progress\r\n- 🔴 Red: Error\r\n- ⚪ Gray: Cleanup\r\n\r\n**Image generation takes 1-5 minutes** - visible browser shows real-time progress\r\n\r\n### Content Generation Pipeline\r\n**Two-stage AI process:**\r\n1. **Content Generator** - Creates engaging social media post from article\r\n   - Platform-specific formatting (LinkedIn default)\r\n   - Includes hooks, hashtags, emojis\r\n   - Uses viral post structure patterns\r\n2. **Prompt Engineer** - Converts post into Midjourney visual prompt\r\n   - Extracts visual elements from text\r\n   - Applies cinematic style and aspect ratio defaults\r\n   - Returns structured prompt with elements\r\n\r\n### Google Docs Integration\r\n**OAuth-based authentication** (`integrations/google-docs.js`):\r\n- Uses refresh token for automated access\r\n- Requires Google Docs API and Google Drive API enabled\r\n- `insertWorkflowResult()` appends formatted content with images\r\n- Document ID specified in `GOOGLE_DOC_ID` env var\r\n\r\n### Article Fetching\r\n**RSS parsing with content extraction** (`agents/article-fetcher.js`):\r\n- Parses RSS feeds with custom fields\r\n- Converts HTML to plain text (strips scripts, styles, images)\r\n- Falls back to downloading full article if RSS snippet too short\r\n- Limits content to 5000 characters for AI processing\r\n\r\n## Development Workflow\r\n\r\n### Adding New Agents\r\n1. Create agent class in `agents/` directory\r\n2. Follow standard pattern: constructor with logger, `run()` method\r\n3. Import config: `import { config } from '../config/config.js'`\r\n4. Add standalone execution block at bottom for testing\r\n5. Add npm script to `package.json` for convenience\r\n\r\n### Creating New Workflows\r\n1. Create workflow class in `workflows/` directory\r\n2. Initialize required agents in constructor\r\n3. Implement `run()` method with orchestration logic\r\n4. Handle initialization/cleanup (especially webhook server)\r\n5. Add CLI command in `index.js` if needed\r\n\r\n### Debugging\r\n```bash\r\n# View real-time logs\r\nGet-Content logs/automation.log -Wait -Tail 50\r\n\r\n# Search for errors\r\nSelect-String -Path logs/error.log -Pattern \"ERROR\"\r\n\r\n# Test webhook server\r\ncurl http://localhost:3000/health\r\n\r\n# Check configuration\r\nnode index.js test\r\n```\r\n\r\n## Output Structure\r\n\r\n**Workflow results saved to** `outputs/workflow-result-{timestamp}.json`:\r\n```json\r\n{\r\n  \"success\": true,\r\n  \"results\": [{\r\n    \"article\": { \"title\", \"link\", \"pubDate\", \"author\" },\r\n    \"socialPost\": \"Generated post content\",\r\n    \"midjourneyPrompt\": \"Generated MJ prompt\",\r\n    \"generatedImage\": \"https://cdn.midjourney.com/...\",\r\n    \"status\": \"success|partial|failed\",\r\n    \"errors\": []\r\n  }],\r\n  \"summary\": {\r\n    \"total\": 1,\r\n    \"successful\": 1,\r\n    \"failed\": 0\r\n  }\r\n}\r\n```\r\n\r\n## Known Limitations\r\n\r\n- Midjourney generation can take up to 5 minutes per image\r\n- Webhook server must be publicly accessible for production use\r\n- Google Docs refresh tokens may expire and require re-authentication\r\n- RSS feeds with rate limiting may cause failures\r\n- Discord tokens may need periodic refresh\r\n\r\n## Related Agent Systems\r\n\r\nThis project is part of a broader agent ecosystem on this machine:\r\n\r\n### Agent-PA (`C:\\Users\\bermi\\Agent-PA`)\r\n**Intelligent personal assistant with Telegram interface and tool integration**\r\n- Natural language processing for tool execution\r\n- Integrates with all `C:\\tools` scripts\r\n- Capabilities: transcription, voice generation, file organization, screen capture\r\n- Telegram bot interface: `/start`, `/tools`, `/help`, `/status`\r\n- Run with: `cd C:\\Users\\bermi\\Agent-PA && npm run enhanced-bot`\r\n\r\n### Tools Directory (`C:\\tools`)\r\n**Shared utilities and scripts used across agent projects:**\r\n- Python scripts (*.py), Node.js scripts (*.js), Batch files (*.bat), PowerShell (*.ps1)\r\n- Transcription tools, Voice generation (ElevenLabs), Audio extraction, File organization\r\n- Central `.env` file with shared API keys (N8N, OpenAI, Anthropic, etc.)\r\n\r\n### N8N Automation (`https://n8n.bermech.com`)\r\n**Production workflow automation platform:**\r\n- API Key available in `C:\\tools\\.env`\r\n- Base URL: `https://n8n.bermech.com`\r\n- Webhook URL: `https://n8n.bermech.com/webhook`\r\n- Can be integrated for workflow orchestration\r\n\r\n### Integration Opportunities\r\n1. **N8N Webhooks**: Trigger this workflow from N8N workflows\r\n2. **Agent-PA**: Control Midjourney automation via Telegram bot\r\n3. **Shared APIs**: Leverage centralized API keys for consistent access\r\n4. **Tool Reuse**: Import utilities from `C:\\tools` for common tasks\r\n",
      "relative_path": "projects\\midjourney-news-automation\\WARP.md",
      "path": "C:\\Users\\bermi\\Projects\\midjourney-news-automation\\WARP.md",
      "project_name": "midjourney-news-automation",
      "indexed_at": "2025-12-18T11:51:47.1716204+00:00",
      "title": "WARP.md",
      "token_estimate": 2551.0,
      "type": "project_rules",
      "size_bytes": 10203
    },
    {
      "content": "# WARP.md\r\n\r\nThis file provides guidance to WARP (warp.dev) when working with code in this repository.\r\n\r\n## Project Overview\r\n\r\nThis is a PowerShell-based automation project for managing n8n Docker containers on QNAP NAS devices. The scripts provide safe update workflows with automatic backup and rollback capabilities.\r\n\r\n**Key Components:**\r\n- `update-n8n.ps1` - Main update script with rollback support\r\n- `backup-n8n.ps1` - Standalone backup utility\r\n- SSH-based remote Docker management on QNAP NAS\r\n\r\n## Environment-Specific Configuration\r\n\r\n### Network Configuration\r\n- **n8n Instance URL:** http://192.168.50.246:5678\r\n- **QNAP Host:** 192.168.50.246\r\n- **SSH Port:** 22 (default)\r\n- **n8n Port:** 5678\r\n\r\n**Important:** All scripts in this project MUST use the n8n instance at `192.168.50.246:5678`. This is the only n8n instance available and all connections must point to it.\r\n\r\n### Data Paths on QNAP\r\n- **n8n Data Volume:** `/share/Container/n8n/.n8n`\r\n- **Backup Storage:** `/share/Container/n8n-backups/`\r\n- **Container Name:** `n8n` (default)\r\n\r\n## Common Commands\r\n\r\n### Running Scripts\r\n\r\n**Update n8n (with automatic backup):**\r\n```powershell\r\n.\\update-n8n.ps1\r\n```\r\n\r\n**Update without backup:**\r\n```powershell\r\n.\\update-n8n.ps1 -BackupBeforeUpdate $false\r\n```\r\n\r\n**Manual backup:**\r\n```powershell\r\n.\\backup-n8n.ps1\r\n```\r\n\r\n**Tagged backup:**\r\n```powershell\r\n.\\backup-n8n.ps1 -BackupTag \"pre-major-update\"\r\n```\r\n\r\n### SSH Operations\r\n\r\n**Test SSH connection:**\r\n```powershell\r\nssh admin@192.168.50.246 \"echo 'Connection successful'\"\r\n```\r\n\r\n**Check n8n version:**\r\n```powershell\r\nssh admin@192.168.50.246 \"docker exec n8n n8n --version\"\r\n```\r\n\r\n**View container logs:**\r\n```powershell\r\nssh admin@192.168.50.246 \"docker logs n8n\"\r\n```\r\n\r\n**List all containers:**\r\n```powershell\r\nssh admin@192.168.50.246 \"docker ps -a\"\r\n```\r\n\r\n## Architecture & Design\r\n\r\n### Update Workflow\r\n1. **Pre-update validation**: Test SSH connection and verify container exists\r\n2. **Configuration extraction**: Capture current container settings via `docker inspect`\r\n3. **Automatic backup**: Create timestamped backup of n8n data (optional but default)\r\n4. **Image update**: Pull latest `n8nio/n8n:latest` image\r\n5. **Container swap**: Stop old container, rename it (for rollback), create new container\r\n6. **Verification**: Check new container status and version\r\n7. **Rollback capability**: Old container kept as `n8n-old-{timestamp}`\r\n\r\n### Backup Strategy\r\n- **Automatic retention**: Keeps last 5 backups, auto-deletes older ones\r\n- **Backup format**: Compressed tar archives (`.tar.gz`)\r\n- **Metadata tracking**: Each backup includes restoration instructions\r\n- **Backup naming**: `n8n-backup-{timestamp}.tar.gz` or `n8n-backup-{custom-tag}.tar.gz`\r\n\r\n### Error Handling\r\n- All SSH commands validated with exit code checks\r\n- Automatic rollback on container creation failure\r\n- User confirmation before critical operations\r\n- Detailed error messages with troubleshooting steps\r\n\r\n## Script Parameters\r\n\r\n### update-n8n.ps1\r\n- `QnapHost` - QNAP IP (default: 192.168.50.246)\r\n- `ContainerName` - Docker container name (default: n8n)\r\n- `BackupBeforeUpdate` - Create backup first (default: $true)\r\n- `SSHUser` - SSH username (default: admin)\r\n\r\n### backup-n8n.ps1\r\n- `QnapHost` - QNAP IP (default: 192.168.50.246)\r\n- `ContainerName` - Docker container name (default: n8n)\r\n- `BackupTag` - Custom backup identifier (default: timestamp)\r\n- `BackupPath` - Remote backup directory (default: /share/Container/n8n-backups)\r\n- `SSHUser` - SSH username (default: admin)\r\n\r\n## Key Implementation Details\r\n\r\n### Docker Container Recreation\r\nThe update script reconstructs the container with specific settings (lines 136-146 in update-n8n.ps1):\r\n- Restart policy: `unless-stopped`\r\n- Port mapping: `5678:5678`\r\n- Volume mount: `/share/Container/n8n/.n8n:/home/node/.n8n`\r\n- Environment variables:\r\n  - `N8N_PROTOCOL=http`\r\n  - `N8N_HOST=192.168.50.246`\r\n  - `N8N_PORT=5678`\r\n\r\n**Critical:** If the actual n8n container uses different environment variables or volumes, the `$recreateCommand` section must be updated before running the script.\r\n\r\n### SSH Command Execution\r\nBoth scripts use the `Invoke-QnapSSH` function pattern:\r\n- Commands executed remotely on QNAP via SSH\r\n- Exit codes validated for error detection\r\n- Output captured and displayed with color coding\r\n\r\n### Backup Cleanup\r\nThe backup script automatically maintains backup count (lines 145-155 in backup-n8n.ps1):\r\n- Sorts backups by timestamp (newest first)\r\n- Keeps 5 most recent\r\n- Removes older backups to prevent disk space issues\r\n\r\n## Rollback Procedures\r\n\r\n### Method 1: Use Renamed Container\r\n```powershell\r\nssh admin@192.168.50.246\r\ndocker stop n8n\r\ndocker rm n8n\r\ndocker rename n8n-old-{timestamp} n8n\r\ndocker start n8n\r\n```\r\n\r\n### Method 2: Restore from Backup\r\n```powershell\r\nssh admin@192.168.50.246\r\ndocker stop n8n\r\ntar -xzf /share/Container/n8n-backups/n8n-backup-{timestamp}.tar.gz -C /share/Container/n8n/\r\ndocker start n8n\r\n```\r\n\r\n## Development Guidelines\r\n\r\n### Testing Changes\r\n- Always test SSH connectivity before making changes\r\n- Verify container names match actual QNAP configuration\r\n- Test with `-BackupBeforeUpdate $false` during development to speed up iterations\r\n- Save `docker inspect` output to temp files for debugging\r\n\r\n### Adding Features\r\n- Follow the existing error handling pattern (exit codes, color-coded output)\r\n- Maintain the backup-first philosophy for destructive operations\r\n- Add user confirmation prompts for risky operations\r\n- Update README.md with new parameters or functionality\r\n\r\n### Security Considerations\r\n- Never commit SSH credentials or keys\r\n- SSH authentication relies on interactive password prompts\r\n- Container inspection files saved to TEMP directory\r\n- All sensitive data excluded via .gitignore\r\n\r\n## Troubleshooting\r\n\r\n### SSH Connection Failures\r\n1. Verify QNAP SSH is enabled (Control Panel → Telnet/SSH)\r\n2. Check QNAP IP is reachable: `Test-NetConnection 192.168.50.246 -Port 22`\r\n3. Try manual SSH: `ssh admin@192.168.50.246`\r\n\r\n### Container Not Found\r\n- List all containers: `ssh admin@192.168.50.246 \"docker ps -a\"`\r\n- Check Container Station is running on QNAP\r\n- Verify container name matches (case-sensitive)\r\n\r\n### Update Failures\r\n- Check Docker logs: `ssh admin@192.168.50.246 \"docker logs n8n\"`\r\n- Verify volume paths exist on QNAP\r\n- Confirm port 5678 is not in use by another service\r\n- Review `$recreateCommand` matches actual container config\r\n\r\n### Backup Issues\r\n- Ensure `/share/Container/n8n-backups/` directory exists\r\n- Check QNAP disk space: `ssh admin@192.168.50.246 \"df -h\"`\r\n- Verify permissions on backup directory\r\n\r\n## Reference Links\r\n\r\n- [n8n Documentation](https://docs.n8n.io/)\r\n- [n8n Docker Hub](https://hub.docker.com/r/n8nio/n8n)\r\n- [QNAP Container Station](https://www.qnap.com/solution/container_station/)\r\n",
      "relative_path": "projects\\n8n-qnap-updater\\WARP.md",
      "path": "C:\\Users\\bermi\\Projects\\n8n-qnap-updater\\WARP.md",
      "project_name": "n8n-qnap-updater",
      "indexed_at": "2025-12-18T11:51:47.1745642+00:00",
      "title": "WARP.md",
      "token_estimate": 1720.0,
      "type": "project_rules",
      "size_bytes": 6880
    },
    {
      "content": "# neta-lumina - Warp Rules\r\n\r\n**Project Type:** generic\r\n**Governance:** Follows GLOBAL_AI_RULES.md from ai-governance\r\n**Last Updated:** 2025-12-18\r\n\r\n---\r\n\r\n## Project-Specific Rules\r\n\r\n### Technology Stack\r\n\r\n### Protected Files\r\n- .env (secrets)\r\n- node_modules/ (dependencies)\r\n- dist/ (build artifacts)\r\n- .git/ (version control)\r\n\r\n### Governance Integration\r\nThis project follows:\r\n- GLOBAL_AI_RULES.md (RULE 12-15)\r\n- CAPABILITIES_MANIFEST.md\r\n- HANDOVER_PROTOCOL.md\r\n- SECRETS_POLICY.md\r\n\r\n**Source:** C:\\Users\\bermi\\Projects\\ai-governance\r\n\r\n---\r\n\r\n## Project Notes\r\n<!-- Add project-specific context here -->\r\n\r\n---\r\n\r\n**Co-Authored-By: Warp <agent@warp.dev>**\r\n",
      "relative_path": "projects\\neta-lumina\\WARP.md",
      "path": "C:\\Users\\bermi\\Projects\\neta-lumina\\WARP.md",
      "project_name": "neta-lumina",
      "indexed_at": "2025-12-18T11:51:47.1764167+00:00",
      "title": "neta-lumina - Warp Rules",
      "token_estimate": 169.0,
      "type": "project_rules",
      "size_bytes": 674
    },
    {
      "content": "# openai-notion-mcp - Warp Rules\r\n\r\n**Project Type:** python\r\n**Governance:** Follows GLOBAL_AI_RULES.md from ai-governance\r\n**Last Updated:** 2025-12-18\r\n\r\n---\r\n\r\n## Project-Specific Rules\r\n\r\n### Technology Stack\r\n- Python project\r\n- Package manager: pip\r\n- Config: requirements.txt\r\n- Install: `pip install -r requirements.txt`\r\n- Test: `pytest` (if configured)\r\n\r\n### Protected Files\r\n- .env (secrets)\r\n- node_modules/ (dependencies)\r\n- dist/ (build artifacts)\r\n- .git/ (version control)\r\n\r\n### Governance Integration\r\nThis project follows:\r\n- GLOBAL_AI_RULES.md (RULE 12-15)\r\n- CAPABILITIES_MANIFEST.md\r\n- HANDOVER_PROTOCOL.md\r\n- SECRETS_POLICY.md\r\n\r\n**Source:** C:\\Users\\bermi\\Projects\\ai-governance\r\n\r\n---\r\n\r\n## Project Notes\r\n<!-- Add project-specific context here -->\r\n\r\n---\r\n\r\n**Co-Authored-By: Warp <agent@warp.dev>**\r\n",
      "relative_path": "projects\\openai-notion-mcp\\WARP.md",
      "path": "C:\\Users\\bermi\\Projects\\openai-notion-mcp\\WARP.md",
      "project_name": "openai-notion-mcp",
      "indexed_at": "2025-12-18T11:51:47.1802565+00:00",
      "title": "openai-notion-mcp - Warp Rules",
      "token_estimate": 208.0,
      "type": "project_rules",
      "size_bytes": 829
    },
    {
      "content": "# WARP.md\r\n\r\nThis file provides guidance to WARP (warp.dev) when working with code in this repository.\r\n\r\n## Project Overview\r\n\r\nThis is a demonstration project showing how to use Claude with MCP (Model Context Protocol) servers to automatically generate n8n workflows. The project integrates Claude CLI with specialized MCP servers that provide n8n documentation and workflow generation capabilities.\r\n\r\n## Key Commands\r\n\r\n### MCP Server Management\r\n```powershell\r\n# Check MCP server status\r\nnpm run mcp-status\r\n# or directly:\r\nclaude mcp list\r\n\r\n# Get details about specific MCP server\r\nclaude mcp get n8n-server\r\nclaude mcp get enhanced-n8n-server\r\n```\r\n\r\n### Workflow Generation\r\n```powershell\r\n# Generate example workflow\r\nnpm run workflow-example\r\n\r\n# Generate custom workflows (examples):\r\nclaude \"Create an n8n workflow for e-commerce order processing\"\r\nclaude \"Build an n8n workflow that integrates Slack, Trello, GitHub, and Google Calendar\"\r\n```\r\n\r\n### Testing and Validation\r\n```powershell\r\n# Test Claude CLI connectivity\r\nclaude \"Test MCP server connection\"\r\n\r\n# Validate generated workflow JSON\r\n# (workflows are exported as JSON for import into n8n)\r\n```\r\n\r\n## Architecture\r\n\r\n### MCP Server Configuration\r\n- **Location**: `.claude.json` contains MCP server definitions\r\n- **n8n-server**: Basic n8n MCP functionality using `n8n-mcp` package\r\n- **enhanced-n8n-server**: Advanced workflow capabilities using `enhanced-n8n-mcp-server` package\r\n- **Windows paths**: MCP server commands point to npm global installation paths\r\n\r\n### Knowledge Base\r\n- **n8n-knowledge-base.json**: Contains node definitions, field specifications, and common workflow patterns\r\n- **examples/workflow-generator.md**: Documentation with prompt examples and best practices\r\n- **Node categories**: trigger, data, network, logic with specific field configurations\r\n\r\n### Workflow Generation Process\r\n1. Claude receives natural language workflow description\r\n2. MCP servers provide n8n node documentation and examples\r\n3. Claude generates complete n8n workflow JSON\r\n4. Generated workflows include proper node connections, error handling, and configuration\r\n\r\n## Project Structure\r\n\r\n```\r\n├── .claude.json                 # MCP server configuration\r\n├── package.json                 # Project metadata and npm scripts\r\n├── n8n-knowledge-base.json     # n8n node definitions and patterns\r\n├── examples/\r\n│   └── workflow-generator.md   # Usage examples and best practices\r\n└── README.md                   # Installation and setup guide\r\n```\r\n\r\n## Dependencies\r\n\r\n### Global Dependencies (already installed)\r\n- `n8n-mcp@2.20.2` - Basic n8n MCP server\r\n- `enhanced-n8n-mcp-server@4.0.5` - Enhanced workflow generation capabilities\r\n- Claude CLI - For MCP server interaction\r\n\r\n### System Requirements\r\n- Node.js v22.13.0+ and npm v11.5.1+\r\n- Python 3.11.9+ (for some MCP server functionality)\r\n- Git 2.48.1+\r\n\r\n## Workflow Development Pattern\r\n\r\nWhen generating workflows:\r\n\r\n1. **Be specific about services**: Include exact integrations (Shopify, Salesforce, Gmail, etc.)\r\n2. **Define business logic**: Explain triggers, conditions, and decision points\r\n3. **Include error handling**: Request proper error management and retry logic\r\n4. **Request documentation**: Ask Claude to explain each workflow step\r\n\r\n### Common Integration Patterns\r\n- **E-commerce**: Shopify + Salesforce + Google Sheets + Gmail\r\n- **Customer Support**: Multi-channel ticket routing with sentiment analysis  \r\n- **Marketing**: Behavior-triggered campaigns with CRM updates\r\n- **Project Management**: Slack + Trello + GitHub + Google Calendar\r\n\r\n## MCP Server Capabilities\r\n\r\nThe configured servers provide:\r\n- Complete n8n node documentation and field specifications\r\n- Pre-built workflow templates and common patterns\r\n- Integration guidance for popular services\r\n- Error handling and retry logic recommendations\r\n- Workflow validation and optimization suggestions\r\n\r\n## Generated Workflow Usage\r\n\r\n1. Copy the JSON output from Claude\r\n2. Import into your n8n instance\r\n3. Configure credentials for each integrated service\r\n4. Test with sample data before production use\r\n5. Monitor execution logs and refine as needed",
      "relative_path": "projects\\youtube-requirements-project\\WARP.md",
      "path": "C:\\Users\\bermi\\Projects\\youtube-requirements-project\\WARP.md",
      "project_name": "youtube-requirements-project",
      "indexed_at": "2025-12-18T11:51:47.1833009+00:00",
      "title": "WARP.md",
      "token_estimate": 1045.0,
      "type": "project_rules",
      "size_bytes": 4177
    }
  ],
  "version": "1.0.0",
  "summary": {
    "total_size_bytes": 127426.0,
    "project_documents": 18,
    "total_documents": 27,
    "total_size_mb": 0.12,
    "total_tokens": 31866.0,
    "core_documents": 9
  }
}
